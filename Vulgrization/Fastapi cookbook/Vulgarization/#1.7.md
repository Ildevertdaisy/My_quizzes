#1

Quand on crée une appli sur internet, comme pour écouter de la musique 🎵 ou jouer à un jeu vidéo 🎮, il faut qu’elle marche bien et qu’elle ne plante pas (ne s’arrête pas d’un coup) dès qu’il y a un petit problème. Mais même si on fait super attention, des erreurs peuvent arriver : par exemple si quelqu’un met un mauvais mot de passe, ou si la connexion internet se coupe.

### Gérer les erreurs, c'est comme être un bon serveur dans un restaurant 🍽️

Gérer les erreurs, c’est comme être un bon serveur dans un restaurant 🍽️. Si un ingrédient manque, il ne se fâche pas, il dit juste : *"Désolé, on n’en a plus, mais on peut vous proposer autre chose !"*

Une bonne appli fait pareil : au lieu de planter (s’arrêter d’un coup) ou montrer un message bizarre, elle explique ce qui s’est passé et propose une solution.


### Pourquoi c'est important dans FastAPI ?

FastAPI, c’est un outil pour créer des sites web ou applis sur internet. Il doit gérer les erreurs intelligemment : pas juste attendre qu’un bug arrive, mais prévoir à l’avance ce qui peut mal se passer, et faire en sorte que tout continue à bien marcher.

Par exemple :

* Si on veut regarder une vidéo 📹 qui n’existe plus, l’appli peut dire *"Cette vidéo n’est plus dispo."* au lieu de rien montrer.
* Dans un jeu 🎮, si on met un mauvais mot de passe, elle dit *"Mot de passe incorrect."* au lieu de planter.

Tout ça, c’est ce qu’on appelle la gestion d’erreurs 💡 (prévenir les problèmes et expliquer clairement ce qui se passe).

### Anticiper les erreurs pour rendre une application plus solide 💪

Anticiper les erreurs, c’est rendre une appli plus solide 💪. Ce n’est pas juste attendre les problèmes, c’est y penser avant et préparer des solutions.

Par exemple, si on fait une appli pour prendre des photos 📸 :

* Si la caméra n’est pas autorisée, l’appli doit expliquer comment l’activer.

C’est ça, prévoir les erreurs avant qu’elles arrivent !

FastAPI aide à bien organiser les erreurs pour que l’appli soit facile à utiliser et ne montre pas de messages bizarres.

---

En résumé, gérer les erreurs, c’est comme un bon serveur dans un resto 🍽️ : on ne laisse pas les gens sans réponse, on leur explique et on propose une solution ! 💡📲



#2

Créer une appli, c’est comme faire un jeu vidéo 🎮 : il faut que tout marche bien, et même s’il y a un problème, l’utilisateur doit passer un bon moment.

Voici la 1ère chose importante pour une appli solide :

### 1️⃣ Personnaliser les erreurs (Custom error handling)

Dans une appli de repas 🍔, si un plat n’existe plus, dire juste *"Erreur 404"* ne suffit pas.
Mieux vaut un message clair comme : *"Ce plat n’est plus au menu, essayez un autre délicieux repas !"*
Ça rend l’appli plus sympa et facile à comprendre.

Personnaliser les erreurs, c’est expliquer clairement au lieu de montrer des messages bizarres.

Par exemple :

* Dans une appli vidéo 🎥, si la vidéo est supprimée, on peut dire : *"Cette vidéo n’est plus là, en voici d’autres !"*

FastAPI aide à bien organiser ces messages pour que l’appli soit plus agréable à utiliser.

---

### 2️⃣ Vérifier les infos avant de les utiliser (Validating data)

Quand on s’inscrit sur une appli de sport 🏃‍♂️, on doit donner des infos comme l’âge ou l’email. Mais si on écrit "abc" à la place de "25", ou qu’on oublie le "@" dans l’email, ça peut faire buguer l’appli 😱.

C’est pour ça qu’il faut toujours vérifier les infos avant de les utiliser.

FastAPI aide à **vérifier les infos** avant de les utiliser.

Par exemple, dans une appli de messages 💬, si on écrit des lettres au lieu d’un numéro, elle peut dire :
*"Oups, ce numéro ne semble pas bon !"*

Ça évite les bugs et rend l’appli plus sûre.

---

### 3️⃣ Tester pour éviter les surprises (Testing scenarios)

Avant de lancer un jeu 🎮 ou une appli 🛒, les développeurs font des tests pour vérifier que tout marche bien.

Par exemple :

* Dans un jeu, ils testent si le perso saute bien avec la touche "Espace".
* Dans une appli bancaire 💳, ils vérifient qu’on ne peut pas payer sans argent.

Avec FastAPI, on peut tester les erreurs possibles pour que l’appli ne casse pas s’il y a un souci.

---

### 🔥 Conclusion : Une appli solide, c’est une appli bien préparée !

Créer une appli, c’est comme organiser une grande fête 🎉 : il faut penser à tout pour que tout se passe bien.

Avec FastAPI, on peut :
✅ faire des messages d’erreurs clairs pour aider les gens
✅ vérifier les infos pour éviter les bugs
✅ tout tester pour que l’appli marche super bien 🚀📲


#3

Avec FastAPI, des erreurs peuvent arriver, comme dans un jeu 🎮 où on appuie sur le mauvais bouton. L’important, c’est que l’appli montre un message clair pour expliquer ce qui se passe.

FastAPI a une **fonction spéciale** pour gérer les erreurs automatiquement. Quand il y a un problème, il renvoie une réponse en **JSON** (une sorte de liste bien rangée avec des infos).

Ça aide à **comprendre l’erreur** et à la **corriger plus facilement**.

### 📌 Exemple avec une appli de shopping

Dans une appli de vêtements 👕, si quelqu’un essaie d’acheter un produit qui n’existe pas, FastAPI dit :
*"Erreur : Ce produit n’existe pas."*

L’appli ne plante pas. C’est comme un vendeur qui dit : *"Désolé, ce pull n’est plus là, vous voulez une autre couleur ?"*.

---

### 🎨 Pourquoi changer les messages d’erreur ?

Parfois, les messages de FastAPI sont trop compliqués. Par exemple, dans une appli de cinéma 🎬, si une place est déjà prise, ça peut dire :
*"Erreur 409 : Conflit de données."*

Mais ça, c’est pas clair du tout pour les gens 🤔.

Au lieu d’un message compliqué, on peut écrire quelque chose de simple :
*"Désolé, cette place est déjà réservée. Essayez un autre siège !"*

FastAPI permet de **changer les messages d’erreur** pour qu’ils soient plus clairs et plus agréables à lire.

---

### 🔐 Sécurité et expérience

Modifier les messages d’erreur, c’est aussi pour la **sécurité**.

Par exemple, dans une appli bancaire 💳, si on met un mauvais mot de passe, il vaut mieux dire :
*"Identifiants incorrects, veuillez réessayer."*

Comme ça, on ne donne pas trop d’infos aux personnes malintentionnées.

Il ne faut pas dire :
*"Le mot de passe est faux, mais l’email est correct."*

Car ça donne des indices à ceux qui veulent deviner des comptes !
FastAPI permet de **changer les messages** pour mieux protéger les utilisateurs.

---

### ✅ Conclusion : Mieux parler aux utilisateurs

FastAPI aide à **gérer et personnaliser les erreurs** pour que l’appli soit :

* **Plus claire** 🧐 : avec des messages faciles à comprendre
* **Plus agréable** 😊 : sans mots compliqués
* **Plus sûre** 🔒 : sans infos pour les pirates

Gérer les erreurs, c’est comme être un bon guide : on montre toujours le bon chemin ! 🚀


#4

Parfois, on cherche quelque chose dans une appli et ça n’existe plus. Par exemple, sur une appli de vidéos 🎥, on peut voir : **"Vidéo introuvable."**

Mais ces messages sont souvent un peu froids. Avec FastAPI, on peut créer un **gestionnaire d’erreurs personnalisé** (un message qu’on choisit soi-même), pour que ce soit plus clair et plus sympa.

### 🎯 Pourquoi changer les messages d’erreur ?

Dans une appli de livraison 🍔, si quelqu’un cherche un resto qui n’existe pas, au lieu de dire :
*"Erreur 404 : Ressource non trouvée"*
on peut écrire :
**"Désolé, ce restaurant n’existe pas. Vérifie le nom ou essaie un autre."**

C’est plus clair et ça aide mieux l’utilisateur.

---

### 🔍 Exemples dans des applis

👉 **Dans une appli shopping 🛍️** : si un produit a disparu, on peut dire :
**"Ce produit n’est plus là, mais en voici d’autres pareils !"**

👉 **Dans une appli de musique 🎵** : si une chanson est supprimée, on peut dire :
**"Cette chanson n’existe plus, mais voilà une playlist sympa !"**

Ces messages sont plus clairs et rendent l’appli plus agréable.

---

### 🛠️ Comment FastAPI aide ?

FastAPI peut **attraper une erreur** (comme quand une page n’existe pas) et **changer le message** pour qu’il soit plus sympa.

C’est comme remplacer un panneau "Accès interdit 🚫" par :
*"Désolé, cette porte est fermée, mais par ici c’est bon ! 🚶"*

---

### ✅ Conclusion : Une appli plus chouette pour tout le monde

Faire des messages d’erreur personnalisés, c’est comme être un bon guide :
✔ On aide les gens à ne pas se perdre.
✔ On explique bien ce qui se passe.
✔ On rend l’appli plus sympa et plus pro.

Avec FastAPI, nos applis deviennent plus humaines et plus malignes ! 🤖💡



#5

### 📌 Comment changer les messages d’erreur dans FastAPI ?

Quand une erreur arrive, comme un bug dans un jeu 🎮 ou une page manquante 🛍️, FastAPI montre un message automatique... mais parfois trop compliqué.

Heureusement, on peut le remplacer par un message plus clair, comme :
**"Oups ! Quelque chose s'est mal passé 😊"**  

---

### 📜 **Le code expliqué ligne par ligne**  

Voici le code qu'on doit ajouter dans un fichier appelé **main.py** (c’est le fichier principal de notre application) :

```python
from fastapi import FastAPI, HTTPException
from starlette.responses import JSONResponse
```

🔹 **`from fastapi import FastAPI, HTTPException`**
➡️ On **importe** deux choses :

* **FastAPI** (le moteur de l’appli, comme une voiture 🚗).
* **HTTPException** (c’est un outil qui sert à gérer les erreurs sur Internet 🌍, comme quand une page ne marche pas).

🔹 **`from starlette.responses import JSONResponse`**
➡️ On **importe JSONResponse** pour envoyer une réponse en **JSON** (un format clair, comme une liste bien rangée 📦).

---

### 🎯 **Créer un gestionnaire d’erreur (exception handler)**  

Ensuite, on ajoute ceci :  

```python
@app.exception_handler(HTTPException)
async def http_exception_handler(request, exc):
```

🔹 **`@app.exception_handler(HTTPException)`**
➡️ On **dit à FastAPI** :
*"Si une erreur HTTP arrive, utilise cette fonction pour montrer un message clair."*

C’est comme dire à un robot 🤖 :
*"Si quelqu’un se trompe dans une appli 💳, montre-lui un message simple, pas un truc bizarre."*

🔹 **`async def http_exception_handler(request, exc):`**
➡️ On **crée une fonction spéciale** pour gérer les erreurs.

* **`async`** veut dire que la fonction est rapide et peut faire plusieurs choses en même temps (comme un serveur de fast-food 🍔🍟).
* **`request`** (c’est ce que l’utilisateur a demandé, comme ouvrir une page).
* **`exc`** (c’est l’erreur qui est arrivée).

---

### 📢 **Envoyer un message d’erreur personnalisé**  

Enfin, voici ce qui se passe quand il y a une erreur :  

```python
    return JSONResponse(
        status_code=exc.status_code,
        content={
            "message": "Oops! Something went wrong"
        },
    )
```

🔹 **`return JSONResponse(...)`**
➡️ Ça veut dire : *"S’il y a une erreur, envoie un message en JSON."*

Comme ça, au lieu d’un écran cassé, l’utilisateur voit un message propre et bien rangé.

🔹 **`status_code=exc.status_code`**
➡️ On garde le **code d’erreur original** (comme 404 pour "Page introuvable" ou 500 pour "Erreur serveur" 💻).
Ça permet de savoir **ce qui s’est passé**.

🔹 **`content={"message": "Oops! Something went wrong"}`**
➡️ On **change le message d’erreur** pour qu’il soit plus clair.
Au lieu de *"HTTP Exception Raised"*, on montre :
**"Oups ! Quelque chose s'est mal passé."**

---

### 🚀 Pourquoi c’est important ?

Avec ce système, l’appli devient **plus simple et moins énervante** pour les utilisateurs.

#### 🎮 Exemple jeu vidéo :

Au lieu de *"Erreur 404"*, on peut dire :
**"Ce niveau n'est pas encore débloqué, continue à jouer ! 🎯"**

#### 📦 Exemple livraison :

Si l’adresse est mauvaise, on peut dire :
**"Adresse introuvable, essayez de la corriger ! 🚚"**

---

### ✅ Conclusion

Avec ce petit code, l’appli devient **plus claire, sympa et facile à utiliser** !

🔹 On **attrape** les erreurs pour ne pas casser l’appli.
🔹 On **change** le message pour qu’il soit simple à comprendre.
🔹 On rend l’appli **plus agréable** pour tout le monde.

C’est comme remplacer un panneau **"DANGER 🚫"** par :
**"Oups, cette porte est fermée, essayez un autre chemin ! 😊"**

Avec FastAPI, gérer les erreurs, c’est facile et malin ! 🚀


#6

### 🎯 **À quoi sert `http_exception_handler` ?**

Quand une appli marche sur internet, parfois il y a des petits problèmes. Par exemple :

* On veut acheter un truc 🛍️, mais il n’y en a plus.
* On cherche une ville sur une appli météo 🌦️, mais on écrit mal son nom.

Dans ces cas, l’appli doit nous dire qu’il y a un souci. Mais au lieu d’un message compliqué, **FastAPI utilise un petit outil spécial (un gestionnaire d’erreur)** qui envoie un message clair et simple que tout le monde peut comprendre.

---

### 🛠 **À quoi sert `http_exception_handler` ?**

`http_exception_handler`, c’est une fonction spéciale qui s’occupe des erreurs appelées `HTTPException`.

#### 📌 **Et une `HTTPException`, c’est quoi ?**

Une **exception** (en code), c’est quand quelque chose ne marche pas comme prévu, comme un *"Oups !"*.
Une **`HTTPException`**, c’est ce genre d’erreur quand on utilise une appli sur internet (HTTP, c’est le langage des sites pour parler entre eux 🌍).

Par exemple :

* **Erreur 404 🛑** : Page introuvable (*comme une vidéo supprimée qu’on cherche sur YouTube*).
* **Erreur 403 🚫** : Accès interdit (*comme une page réservée aux abonnés*).
* **Erreur 500 💥** : Bug du site (*le serveur ne marche plus*).

La fonction **`http_exception_handler`** sert à attraper ces erreurs et montrer un message simple et clair, au lieu d’un message compliqué que personne ne comprend.

---

### 🔄 **Comment ça marche dans l’appli ?**

Quand une **`HTTPException`** arrive (peu importe où), FastAPI l’attrape et dit :
*"Pas de panique ! On va utiliser `http_exception_handler` pour montrer un message plus sympa et facile à lire !"*

👉 **Exemple dans une appli de train 🚆** :
Si on cherche un train qui n’existe pas, au lieu de *"Erreur 404"*, on peut dire :
**"Ce train n’est pas disponible. Essayez une autre destination."**

👉 **Exemple dans une appli de tâches 📋** :
Si on veut supprimer une tâche déjà partie, au lieu de *"Erreur 400"*, on peut dire :
**"Cette tâche a déjà été supprimée. Créez-en une nouvelle !"**

---

### ✅ **Pourquoi c’est utile ?**

🚀 **1. C’est plus agréable pour les utilisateurs**
C’est mieux de lire *"Désolé, cette page n’existe pas"* que *"Erreur 404 - Resource Not Found"*.

🔒 **2. Ça protège les infos secrètes**
Par exemple, dans une appli bancaire 💳, il ne faut pas montrer trop de détails si une erreur arrive.

🔧 **3. Ça aide les développeurs**
S’ils voient souvent la même erreur, ils peuvent la corriger plus vite.


---

### 🏁 **Conclusion**

Avec **`http_exception_handler`**, FastAPI peut attraper toutes les erreurs HTTP et montrer un message plus clair et plus gentil aux gens.

C’est comme dire :
**"Ce produit est en rupture, voulez-vous voir autre chose ?"** 🛒
au lieu de :
*"Erreur 404 - Produit indisponible"*.

FastAPI rend les applis plus faciles à comprendre, plus sympas et plus humaines ! 🤖✨


#7

### 🔎 **Tester les erreurs avec FastAPI**

On a vu que FastAPI peut montrer des messages d’erreur plus clairs.
Maintenant, on va **tester ça** en créant un **endpoint** (une adresse spéciale dans l’appli qui fait une action quand on la visite).

---

### 📜 **Le code expliqué ligne par ligne**  

Voici le code à ajouter dans FastAPI :

```python
@app.get("/error_endpoint")
async def raise_exception():
    raise HTTPException(status_code=400)
```

---

### 🏷 **1. @app.get("/error\_endpoint")**

🔹 **`@app.get`** veut dire qu’on crée une **adresse spéciale (endpoint)** dans l’appli.
* **`"/error_endpoint"`**, c’est le chemin (l’adresse) que l’utilisateur peut visiter.

* Un **endpoint**, c’est une adresse comme `/login` pour se connecter.
* Ici, **`/error_endpoint`** sert à tester les erreurs.

🎮 **Exemple dans un jeu :**
C’est comme créer un **niveau secret** juste pour voir ce qui se passe quand on provoque un bug.

---

### 🔄 **2. async def raise\_exception():**

🔹 **`async def raise_exception()`** crée une fonction qui se lance quand quelqu’un va sur **`/error_endpoint`**.

📌 **`async`**, ça veut dire que la fonction peut tourner **sans tout bloquer**.
C’est comme **préparer plusieurs plats en même temps** dans une cuisine 🍳, au lieu d’attendre un par un.
* **`def`** veut dire **"Je crée une fonction"**, comme une recette qu’on pourra refaire.
* **`raise_exception()`** est juste **le nom de la fonction**.

📱 **Exemple dans une appli photo :**
Comme une fonction `prendre_photo()` qui se lance quand on appuie sur un bouton 📸, ici, la fonction démarre… mais au lieu d’une photo, elle lance une erreur.

---

### ❌ **3. raise HTTPException(status\_code=400)**

🔹 Cette ligne dit à l’appli : **"Lance une erreur 400 maintenant !"** 🚨

📌 **Explication :**

* **`raise`** veut dire **"Lance une erreur tout de suite"**.
* **`HTTPException`** dit : **"C’est une erreur spéciale pour le web (HTTP)"**.
* **`status_code=400`** veut dire **"Mauvaise requête" (Bad Request)**.
* Cette erreur arrive quand l’utilisateur **envoie une info pas bonne**, comme un mot de passe vide ou une date mal écrite.

🎭 **Exemple dans une appli de cinéma 🎬**
Si quelqu’un oublie de choisir une date pour réserver, l’appli peut montrer une erreur **400** :
**"Erreur 400 : Vous devez sélectionner une date pour continuer."**

---

### 🎯 **Pourquoi faire ça ?**

Ce code sert à **tester les erreurs**, comme un **simulateur de crash** pour avion ✈️ : on vérifie les réactions avant que ça arrive pour de vrai.

📌 **Exemples :**
✔ Dans une appli bancaire 💳 : tester si une erreur s’affiche sans montant.
✔ Dans une appli de shopping 🛒 : voir ce qui se passe si on veut acheter un produit qui n’existe plus.

---

### ✅ **Conclusion**

🔹 Ce test sert à **vérifier que les erreurs sont bien gérées** dans FastAPI.
🔹 En visitant **`/error_endpoint`**, on provoque une erreur **400** pour voir si le bon message s’affiche.
🔹 C’est super utile pour **éviter les bugs** et rendre l’appli plus solide 💪.

C’est comme tester les freins d’une voiture 🚗 avant de prendre la route 🚦.



#8

### 🚀 **Lancer et tester dans FastAPI**

Maintenant qu’on a écrit le code, on **démarre l’appli** pour voir si tout marche.
C’est comme **ouvrir un jeu 🎮** pour tester si les boutons et les niveaux fonctionnent bien. 

---

### 🏁 **1. Démarrer le serveur avec Uvicorn**

Pour faire marcher l’appli, il faut **lancer un serveur**.
C’est comme **allumer la console de jeu** avant de jouer 🎮.

Voici la commande à taper dans le **terminal** (l’endroit où on écrit pour parler à l’ordi) :

```
$ uvicorn main:app
```

🔹 **`uvicorn`**, c’est le **moteur** qui fait tourner l’application FastAPI. 
🔹 **`main:app`** veut dire :
  * **`main`** → c’est le **nom du fichier** où se trouve notre appli FastAPI.
  * **`app`** → c’est le **nom de l’application** à l’intérieur du fichier. 

💡 **Analogie :** C’est comme **appuyer sur "ON"** pour lancer un jeu 🎮 précis sur la console.

---

### 🌍 **2. Ouvrir le navigateur et tester l'erreur**  

Une fois l’appli lancée, on ouvre un **navigateur** (comme Chrome) et on tape :

```
http://localhost:8000/error_endpoint
```

🔹 **`localhost:8000`** → ça veut dire qu’on teste l’appli **sur notre ordi** (localhost = mon ordinateur 🖥️).
🔹 **`/error_endpoint`** → c’est le **chemin spécial** qu’on a créé pour tester les erreurs.


💡 **Analogie :** C’est comme **entrer par une porte "réservée au personnel"** dans un magasin pour voir si une alarme sonne 🚪🔔.

---

### 📩 **3. La réponse affichée par FastAPI**  

Si tout marche bien, on verra :

```json
{
    "message": "Oops! Something went wrong"
}
```

💡 **C’est du JSON** (un format de données utilisé sur internet, comme une boîte bien rangée 📦).
* Le message **"Oops! Something went wrong"** vient de notre **gestionnaire d’erreurs**.
* Ça montre que l’appli **attrape bien l’erreur** et affiche un **message simple** au lieu d’un truc compliqué 🎉.


---

### 🎯 **Pourquoi c’est important ?**

✔ Vérifier que l’appli **gère bien les erreurs** (elle ne plante pas).
✔ Donner un **message clair** au lieu d’un code bizarre.
✔ **Tester avant** que de vrais gens l’utilisent.

---

### 🏆 **Conclusion**

On a **lancé l’appli**, **testé une erreur personnalisée** et tout marche bien ! 🚀

C’est comme si on avait testé un **niveau spécial dans un jeu 🎮** pour voir si tout réagit bien. Maintenant, on peut continuer à rendre l’appli encore plus chouette ! 😊