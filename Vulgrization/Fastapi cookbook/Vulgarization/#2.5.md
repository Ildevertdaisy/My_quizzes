#1

---

### **CRUD avec SQLAlchemy (version courte pour enfants)**

Quand on fait une appli qui utilise des **données** (comme une appli de photos 📸 ou un jeu vidéo 🎮 avec des scores), on doit **garder ces infos quelque part**. Pour ça, on utilise une **base de données** (c’est comme un grand classeur avec des fiches où on note tout ce qui est important).

Mais comment l’appli parle avec la base de données ? 🤔
Grâce à **SQLAlchemy**, un outil magique qui aide l’appli à discuter avec la base en utilisant **Python** (un langage que les développeurs comprennent bien). 🐍


---

### **Les modèles avec SQLAlchemy (version courte pour enfants)**

Imagine que tu fais une appli pour ta **liste de tâches** 📝, comme noter tes devoirs.
Dans la base de données, tu as une **table** (comme un tableau Excel) avec des lignes et des colonnes pour ranger toutes ces tâches.


💡 Un **modèle de base de données**, c’est comme un **plan** pour dire à l’ordi comment ranger les infos.

Par exemple, pour une appli avec des **scores de jeux vidéo** 🎮 :

* Chaque **joueur** a un **nom**
* Chaque **score** a un **nombre de points** 🏆

Ces modèles sont des **classes Python** (comme des fiches de personnage dans un jeu) qui expliquent **comment ranger les données** dans la base.

---

### **Pourquoi SQLAlchemy ? (version courte pour enfants)**

👉 Imagine une appli de **musique** 🎶 où tu mets des chansons dans une playlist.
Avec **SQLAlchemy**, tu peux facilement :

* **ajouter** une chanson
* **changer** son titre
* **enlever** une chanson
* **voir** toutes les chansons de la playlist

Ce sont les **opérations CRUD** :

* **C**REATE (Créer) → Ajouter une chanson 🎼
* **R**EAD (Lire) → Voir la liste 📃
* **U**PDATE (Changer) → Modifier le titre 📝
* **D**ELETE (Supprimer) → Enlever une chanson ❌

SQLAlchemy rend tout ça plus simple en utilisant des **commandes Python** au lieu d’écrire du **SQL** (un langage plus compliqué des bases de données).


---

### **Pourquoi c’est pratique ? (version courte pour enfants)**

✅ **Facile à comprendre** → On écrit du **Python simple** au lieu de codes compliqués.
✅ **Moins d’erreurs** → SQLAlchemy fait beaucoup de choses tout seul.
✅ **Partout** → Pour une appli de **films** 🍿 ou de **recettes** 🍕, il aide à ranger les données proprement.


---

### **En résumé (version courte pour enfants)**

📌 **SQLAlchemy** aide à gérer les bases de données facilement avec **Python**.
📌 Les **modèles** sont comme des **plans** pour bien ranger les infos.
📌 Les actions **CRUD** (Créer, Lire, Changer, Supprimer) servent à manipuler les données.
📌 Que ce soit pour une appli de **photos** 📸 ou de **jeux** 🎮, SQLAlchemy aide à tout organiser.

---




#2

---

### **Les points d'accès (version courte pour enfants)**

Une appli a besoin de **gérer les données** 📦, comme :

* Une appli de **photos** 📸 pour ajouter, voir, changer ou supprimer une image.
* Une appli de **musique** 🎵 pour ajouter une chanson, voir ta playlist, changer un titre ou enlever un morceau.

Pour faire ces actions, il faut un **système** qui aide l’appli à **parler avec la base de données** 🗣️💾.
Ce système s’appelle une **API** (un serveur qui comprend les commandes et répond aux demandes).

---

### **C’est quoi un endpoint ? (version courte pour enfants)**

Un **endpoint** (point d’accès), c’est une **adresse sur Internet** 🌍 où l’appli peut **demander une action** sur les données.
C’est comme une **porte** où on frappe 📩 pour demander quelque chose.


Par exemple, l’appli peut demander à un **endpoint** de :

1. **Créer** ➡️ Ajouter une chanson à la playlist 🎵
2. **Lire** ➡️ Voir toutes les chansons
3. **Changer** ➡️ Modifier le titre d’une chanson
4. **Supprimer** ➡️ Enlever une chanson de la liste

Ces quatre actions ont un nom spécial : **CRUD** (Créer, Lire, Changer, Supprimer).


---

### **CRUD, ça veut dire quoi ? (version courte pour enfants)**

CRUD, c’est un mot spécial qui veut dire :

* **C**REATE (Créer) ➡️ Ajouter une donnée 📥
* **R**EAD (Lire) ➡️ Voir une donnée 📖
* **U**PDATE (Changer) ➡️ Modifier une donnée 🔄
* **D**ELETE (Supprimer) ➡️ Effacer une donnée 🗑️

Toutes les applis qui utilisent des infos font ça !

💡 **Exemples de CRUD** :

* **Dans un jeu vidéo 🎮** → Créer un perso, voir ses points, changer son équipement, ou l’effacer.
* **Dans une appli de tâches ✅** → Ajouter une tâche, voir la liste, changer un mot, ou supprimer une tâche finie.
* **Sur un site de vente 🛒** → Mettre un produit dans le panier, voir ce qu’il y a, changer la quantité, ou retirer un article.

---

### **Pourquoi utiliser FastAPI ? (version courte pour enfants)**

**FastAPI** est un outil pour faire des **API facilement** avec **Python** 🐍.
Il aide à créer les **endpoints CRUD** (les adresses où l’appli envoie ses demandes pour changer les données).
 

💡 En résumé :
✅ Les **endpoints** sont comme des **portes** où l’appli frappe pour demander quelque chose.
✅ **CRUD**, c’est pour **ajouter, lire, modifier et supprimer** des infos.
✅ **FastAPI** aide à créer ces portes pour que l’appli parle à la base de données.

---

C’est comme un **restaurant** 🍽️ :

* Le **client** (l’appli) commande un plat (demande une donnée).
* Le **serveur** (FastAPI) passe la commande à la **cuisine** (la base de données).
* La cuisine prépare et envoie le plat.
* Le serveur ramène le plat au client 🍛 (l’appli reçoit la réponse).

Avec **FastAPI**, tout ça va **vite et bien** 🚀.



#3

### **Prêt à manipuler les données avec FastAPI 🚀**

Maintenant que le **modèle de données** est prêt (le plan pour ranger les infos 📦), on peut commencer les **vraies actions** pour utiliser ces données dans notre appli.


Les actions qu’on va faire s’appellent **CRUD** (Créer, Lire, Changer, Supprimer).
Elles sont **très importantes** car elles servent à **parler avec la base de données** et à **changer ce qu’il y a dedans** !

---

### **Pourquoi CRUD est super important ? (version courte pour enfants)**

Quand tu utilises une appli, tu **parles à la base de données** sans le savoir !

* 📸 **Dans une appli de photos** :

  * Tu ajoutes une photo (CREATE)
  * Tu regardes ton album (READ)
  * Tu changes le titre (UPDATE)
  * Tu supprimes une vieille photo (DELETE)

* 🎮 **Dans un jeu vidéo** :

  * Tu crées un perso (CREATE)
  * Tu vois ton score (READ)
  * Tu améliores ton équipement (UPDATE)
  * Tu supprimes un perso (DELETE)

Les applis envoient ces **demandes CRUD** à la base pour gérer les infos.

---

### **Comment FastAPI fait tout ça ? (version courte pour enfants)**

**FastAPI** est un outil **rapide et super efficace** ⚡.
Il crée des **endpoints** (des adresses) pour chaque action **CRUD** :
ajouter, voir, changer ou supprimer des infos.

💡 **Exemple** :
Si l’appli veut **voir les photos**, elle envoie une demande à l’**endpoint** des photos.
**FastAPI** la reçoit, va chercher les infos dans la base, puis les renvoie à l’appli 📩.

Avec **FastAPI**, tout se fait **vite** et **bien rangé**, donc les applis sont **rapides et faciles à utiliser** !

---

### **Résumé simple et imagé 📝 (version courte pour enfants)**

📌 **CRUD**, c’est pour **ajouter, voir, changer, supprimer** des données.
📌 Ces actions sont **très utiles** pour les applis (jeux, photos, shopping…).
📌 **FastAPI** crée des **endpoints** (portes où l’appli fait ses demandes).
📌 Une base bien rangée rend l’appli **rapide et facile** 🚀.

C’est comme une grande **bibliothèque** 📚 :

* On **ajoute un livre** (CREATE)
* On **le lit** (READ)
* On **corrige la couverture** (UPDATE)
* On **retire le vieux livre** (DELETE)

Et **FastAPI**, c’est le **super bibliothécaire** qui gère tout vite et bien ! 😃




#4

### **Comment interagir avec les données ? 🤔 (version courte pour enfants)**

On sait que **CRUD** sert à **créer, lire, changer, supprimer** des infos.
Maintenant, il faut **préparer des endroits précis** pour faire ces actions dans l’appli.
  

Ces endroits s’appellent des **endpoints** 📡 (points d’accès).
Ce sont des **adresses spéciales** où l’appli envoie une demande pour **parler à la base de données**.


---

### **Un endpoint pour chaque action 🔄 (version courte pour enfants)**

Chaque action CRUD a son **endpoint** spécial.
C’est comme un **guichet** dans un supermarché 🏬 :

* Un pour **ajouter un produit** 🛍️ (CREATE)
* Un pour **voir le panier** 👀 (READ)
* Un pour **changer la quantité** 🔄 (UPDATE)
* Un pour **retirer un article** ❌ (DELETE)

L’appli **sait à quelle porte frapper** pour chaque demande !
  

---

### **Exemples dans la vraie vie 🏡 (version courte pour enfants)**

💾 **Dans une appli de fichiers** (comme Google Drive) :

* Ajouter un fichier (CREATE)
* Voir les fichiers (READ)
* Changer le nom (UPDATE)
* Supprimer un fichier (DELETE)

🎮 **Dans un jeu en ligne** :

* Créer un perso (CREATE)
* Voir les scores (READ)
* Changer l’équipement (UPDATE)
* Supprimer le perso (DELETE)

📝 **Dans une appli de tâches** :

* Ajouter une tâche (CREATE)
* Voir la liste (READ)
* Modifier une tâche (UPDATE)
* Supprimer une tâche finie (DELETE)

---

### **Pourquoi avoir des endpoints séparés ? 🚀 (version courte pour enfants)**

✅ **Tout est bien rangé** → On sait où envoyer chaque demande.
✅ **Plus simple** → Chaque action a sa propre porte.
✅ **Rapide et sans erreur** → L’appli parle à la base facilement et bien.

---

### **En résumé 🎯 (version courte pour enfants)**

📌 Pour chaque action (ajouter, voir, changer, supprimer), on fait **un endpoint spécial**.
📌 Les endpoints sont comme des **guichets** pour parler à la base de données.
📌 Peu importe l’appli (jeux, photos, fichiers…), ces **endpoints CRUD** sont super utiles !

C’est comme une **ville bien organisée** 🏙️ : chaque endpoint est une **route** qui mène **pile au bon endroit** 🚗💨.



#5

### **Ajouter un utilisateur 👤💾 (version courte pour enfants)**

Dans une appli, on doit souvent **ajouter des utilisateurs** :

* 🎮 Dans un jeu → créer un joueur
* 🛒 Dans une boutique → enregistrer un client

Pour ça, on envoie une **requête POST** (un message pour dire “ajoute quelqu’un” à l’appli).


---

### **Comment ça marche ? 🚀 (version courte pour enfants)**

Avec **FastAPI**, on crée :

* un **endpoint** (une porte pour recevoir le nouvel utilisateur)
* un **modèle** (le plan pour dire comment l’utilisateur est décrit)

Voici une partie du code présenté dans le texte :  

```python
class UserBody(BaseModel):
    name: str
    email: str
```

Décomposons et expliquons chaque ligne **de manière simple et imagée** ! 👇  

---

### **1️⃣ La classe `UserBody` (version courte pour enfants)**

```python
class UserBody(BaseModel):
```

➡️ On crée un **modèle** pour représenter un **utilisateur**.
Une **classe** en Python, c’est comme un **moule à gâteau** 🍰 :
elle dit **quelle forme** chaque utilisateur doit avoir (mêmes infos à l’intérieur).

📌 **`BaseModel`**, c’est un **super-moule** qui vient de **Pydantic** (une boîte spéciale pour vérifier les infos).
➡️ Il vérifie que les **données sont bien rangées** et comme on les attend.

---

#### **2️⃣ Infos d’un utilisateur 📜 (version courte pour enfants)**

```python
name: str  
email: str  
```

➡️ Chaque utilisateur doit avoir :

* un **nom** (`name`) → une **chaîne de texte** (`str`)
* un **email** (`email`) → aussi une **chaîne de texte** (`str`)

📌 **Pourquoi écrire "str" ?**
Parce que **Python doit savoir quel type d’info** il attend.
➡️ Si on ne dit rien, quelqu’un pourrait mettre un **nombre à la place d’un nom**, et ça ferait une **erreur** ❌.

💡 **Comparaison simple** :
C’est comme un **formulaire sur Internet** 🌐 :

* Une case pour écrire le **nom** (pas de chiffres).
* Une case pour l’**email** (avec un "@" et un ".").
  ➡️ **Pydantic** vérifie que tout est **correct** avant d’enregistrer.

---

### **Pourquoi c’est important ? 🤔 (version courte pour enfants)**

Créer une structure pour un utilisateur, ça sert à :
✅ Vérifier que les infos sont **complètes et bien écrites**
✅ Aider le serveur à **ajouter l’utilisateur correctement**
✅ **Éviter les bugs** si quelqu’un met un email sans "@"

---

### **Résumé simplifié 🎯 (version courte pour enfants)**

📌 Un utilisateur est ajouté avec une **requête POST** (un message pour enregistrer).
📌 **FastAPI** utilise un **modèle `UserBody`** pour organiser les infos.
📌 Ce modèle est comme un **moule à gâteau** 🍰 (même forme : nom + email).
📌 **Pydantic** (avec `BaseModel`) **vérifie que tout est bien écrit** ✅.

C’est comme inscrire un joueur à un tournoi de foot ⚽ :

* Il **remplit une fiche** (`UserBody`).
* Il doit mettre **son nom et son email** (obligatoire).
* S’il oublie l’email, l’inscription est **refusée** (FastAPI bloque).

➡️ Résultat : l’appli est **plus claire, plus sûre, plus simple** ! 🚀



#6

### **Ajouter un utilisateur dans la base 👤➡️💾**

On va maintenant **créer une porte d’entrée (endpoint)** pour que l’appli puisse **envoyer une demande et stocker un nouvel utilisateur dans la base de données**.

C’est comme **remplir un petit formulaire** sur un site 📄 :

1. L’utilisateur **écrit son nom et son email**.
2. L’appli **les enregistre dans la base de données**.
3. Après ça, il peut **se connecter et utiliser l’appli**.

On va maintenant voir **le code FastAPI** qui fait ça. ⬇️


---

### **Le code présenté 🖥️**  

```python
@app.post("/user")
def add_new_user(
    user: UserBody,
    db: Session = Depends(get_db)
):
    new_user = User(
        name=user.name,
        email=user.email
    )
    db.add(new_user)
    db.commit()
    db.refresh(new_user)
    return new_user
```

Maintenant, **décomposons** chaque ligne pour comprendre **ce qui se passe** ! 👇  

---

### **1️⃣ La porte d’entrée pour ajouter un utilisateur 📡**

```python
@app.post("/user")
```

➡️ **Explication simple** :

* `@app.post("/user")` veut dire que **ce code s’occupe de recevoir une demande pour ajouter un utilisateur** (on appelle ça une requête POST).
* `"/user"` est **l’adresse spéciale** que l’appli utilise pour envoyer cette demande.
 

💡 **Petit exemple** : C’est comme un **guichet d’inscription** à l’école 📚 :

* L’élève donne son nom et son email.
* L’école **l’enregistre dans ses fichiers**.

👉 L’appli fait pareil, mais avec un **utilisateur dans une base de données** !


#### **2️⃣ La fonction qui ajoute un utilisateur 🛠️**

```python
def add_new_user(
    user: UserBody,
    db: Session = Depends(get_db)
):
```

➡️ **Explication simple** :

* `def add_new_user(...)` → On crée **une fonction spéciale** pour ajouter un utilisateur.
* `user: UserBody` → L’appli **attend un utilisateur** avec un nom et un email (modèle `UserBody`).
* `db: Session = Depends(get_db)` → `db`, c’est **la connexion à la base de données** (comme une prise qui relie l’appli à la base).
 

💡 **Petit exemple** :

* Un **employé reçoit les nouvelles inscriptions**.
* Il ouvre le **registre (base de données)** pour y écrire le nouvel élève.

👉 FastAPI utilise `Depends(get_db)` pour être sûr qu’on **utilise la bonne base de données**.


---

#### **3️⃣ On crée le nouvel utilisateur 👶**

```python
new_user = User(
    name=user.name,
    email=user.email
)
```

➡️ **Explication simple** :

* On fabrique un **nouvel utilisateur** avec la classe `User`.
* Il prend le **nom** et l’**email** que l’appli a reçus.

💡 **Petit exemple** :
C’est comme **remplir une fiche** avec le nom et l’email du nouvel utilisateur. 📝
 

---

#### **4️⃣ On met l’utilisateur dans la base 📥**

```python
db.add(new_user)
```

➡️ **Explication simple** :

* `db.add(new_user)` veut dire qu’on **ajoute l’utilisateur**, mais **ce n’est pas encore confirmé**.

💡 **Petit exemple** :
C’est comme **écrire un nom dans un cahier**, mais **sans encore le valider officiellement**.


---

#### **5️⃣ On valide l’ajout ✅**

```python
db.commit()
```

➡️ **Explication simple** :

* `db.commit()` veut dire qu’on **confirme l’ajout** de l’utilisateur.
* Sans ça, il **n’est pas encore vraiment enregistré**.

💡 **Petit exemple** :
C’est comme **signer un contrat** 📜 : après la signature, **c’est officiel** !

---

#### **6️⃣ On met à jour les infos 🔄**

```python
db.refresh(new_user)
```

➡️ **Explication simple** :

* `db.refresh(new_user)` sert à **mettre à jour l’utilisateur** après l’enregistrement.
* Comme ça, on est sûr d’avoir **toutes les bonnes infos**.


💡 **Petit exemple** :
C’est comme **vérifier dans l’ordi** que l’inscription est bien là avant de dire « c’est bon ! » ✅

---

#### **7️⃣ On envoie la confirmation 📤**

```python
return new_user
```

➡️ **Explication simple** :

* L’appli **renvoie les infos de l’utilisateur** pour dire que tout s’est bien passé.

💡 **Petit exemple** :
C’est comme **recevoir un reçu après s’être inscrit** 🎟️ : ça prouve que c’est bien fait !

---

### **Pourquoi c’est trop bien ? 🚀**

✅ On **ajoute un utilisateur avec très peu de lignes** !
✅ Tout est **clair et bien rangé**.
✅ L’appli **sait où envoyer les infos** pour faire l’inscription.

---

### **Petit résumé 🎯**

📌 **FastAPI ajoute un utilisateur avec une demande POST** (pour ajouter).
📌 **L’adresse `/user` reçoit les inscriptions**.
📌 **On crée l’utilisateur, on l’ajoute, puis on confirme**.
📌 C’est comme **remplir une fiche et valider l’inscription**.

Comme **créer un compte sur un site** 🌐 :
1️⃣ L’utilisateur met son nom et email.
2️⃣ L’appli enregistre les infos.
3️⃣ Une fois validé, le compte est prêt !

🎉 Avec FastAPI, **tout va vite et c’est bien rangé** ! 🚀



#7

### **🔍 Retrouver un utilisateur avec son numéro 👤**

Parfois, dans une appli, on veut **chercher une personne précise** avec son **numéro d’identifiant** (comme une carte de bibliothèque 📚).

📌 **Quelques exemples dans la vraie vie :**

* **🎮 Dans un jeu** → Trouver un joueur précis.
* **🏬 Sur un site de vente** → Voir un produit avec son code.

👉 Ici, on va apprendre à **chercher un utilisateur avec son numéro** (identifiant).
L’appli envoie une **demande GET** 📩 (ça veut dire **lire une info**).


---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
from fastapi import HTTPException
@app.get("/user")
def get_user(
    user_id: int,
    db: Session = Depends(get_db)
    ):
    user = (
        db.query(User).filter(
            User.id == user_id
        ).first()
    )
    if user is None:
        raise HTTPException(
            status_code=404,
            detail="User not found"
        )
    return user
```

🧐 **Voyons chaque ligne en expliquant CHAQUE élément avec des analogies !** 👇  

---

### **1️⃣ On importe un outil pour les erreurs 🚨**

```python
from fastapi import HTTPException
```

➡️ **Explication simple** :

* `HTTPException` sert à **envoyer un message d’erreur** si **l’utilisateur n’existe pas**.

💡 **Petit exemple** :
C’est comme **une alarme dans un magasin 🏪** :

* Si tout va bien, **pas de bruit**.
* Si **quelqu’un vole**, **l’alarme sonne**.
  👉 Ici, `HTTPException`, c’est **l’alarme** si **l’utilisateur n’existe pas**.

---

### **2️⃣ La porte pour demander un utilisateur 📡**

```python
@app.get("/user")
```

➡️ **Explication simple** :

* `@app.get("/user")` crée **une porte d’entrée** pour demander un utilisateur.
* Le mot `get` veut dire **on veut lire une info**.

💡 **Petit exemple** :
C’est comme **le guichet d’infos d’un supermarché 🏬** :

* Tu demandes **où est un produit**, et on **te répond**.
  👉 L’appli fait pareil : elle **cherche l’utilisateur dans la base** et **te l’envoie**.

---

### **3️⃣ La fonction pour retrouver un utilisateur 🛠️**

```python
def get_user(
    user_id: int,
    db: Session = Depends(get_db)
    ):
```

➡️ **Explication simple** :

* `def get_user(...)` → C’est **une boîte magique** qui **cherche un utilisateur**.
* `user_id: int` → On attend **un numéro** (entier) pour savoir **qui chercher**.
* `db` → C’est **le livre d’enregistrement** avec tous les utilisateurs.


💡 **Petit exemple** :
C’est comme **chercher un colis à la poste 📦** :

* Tu donnes **le numéro (`user_id`)**.
* L’employé cherche dans **son registre (`db`)**.
* S’il le trouve, **il te le donne**. Sinon, **il te dit que ça n’existe pas**.

---

### **4️⃣ On cherche l’utilisateur dans la base 📖**

```python
user = (
    db.query(User).filter(
        User.id == user_id
    ).first()
)
```

➡️ **Explication simple** :

* `db.query(User)` → On regarde **tous les utilisateurs**.
* `.filter(User.id == user_id)` → On **garde celui avec le bon numéro**.
* `.first()` → On **prend le premier trouvé**.

💡 **Petit exemple** :
C’est comme **chercher un élève dans une école 🏫** :

* Tu ouvres **la liste**.
* Tu cherches **le bon prénom**.
* Dès que tu le trouves, **tu t’arrêtes**.
 

---

### **5️⃣ On vérifie si l’utilisateur existe ❌**

```python
if user is None:
```

➡️ **Explication simple** :

* Si **on ne trouve personne** avec ce numéro, alors **on réagit**.


💡 **Petit exemple** :
C’est comme **réserver une place de concert 🎤** :

* Si le **numéro est bon**, tu as ton **billet**.
* Si le **numéro est faux**, on te dit que la **place n’existe pas**.


---

### **6️⃣ On envoie un message d’erreur si l’utilisateur n’existe pas 🚨**

```python
raise HTTPException(
    status_code=404,
    detail="User not found"
)
```

➡️ **Explication simple** :

* `raise HTTPException(...)` → **Lance une alerte**.
* `status_code=404` → 404 veut dire **"Pas trouvé"**.
* `detail="User not found"` → Message : **"Utilisateur introuvable"**.  

💡 **Petit exemple** :
C’est comme **un distributeur de billets 💰** :

* Avec le **bon code**, tu retires de l’argent.
* Si le **compte n’existe pas**, il te montre **un message d’erreur**.


---

### **7️⃣ On renvoie l’utilisateur s’il existe ✅**

```python
return user
```

➡️ **Explication simple** :

* Si **on trouve l’utilisateur**, **on le renvoie** pour que l’appli **puisse l’afficher**.

💡 **Petit exemple** :
C’est comme **chercher un colis dans un entrepôt 📦** :

* Si le **colis est là**, **on le donne au client**.


---

## **Pourquoi c’est super utile ? 🤔**

✅ On peut **retrouver un utilisateur avec son numéro**.
✅ Si on ne le trouve pas, **on montre un message clair** (pas un bug bizarre).
✅ L’appli devient **plus maligne et plus simple à utiliser** !

---

## **📌 Petit résumé 🎯**

📌 **FastAPI permet de chercher un utilisateur avec son numéro (`user_id`).**
📌 **S’il existe, on le renvoie.**
📌 **Sinon, on montre une erreur 404 ("Utilisateur introuvable").**

C’est comme **demander une clé d’hôtel 🏨** :
1️⃣ Tu donnes ton **numéro de chambre**.
2️⃣ L’employé **regarde dans la liste**.
3️⃣ Si la chambre existe, **il te donne la clé 🔑**.
4️⃣ Sinon, il dit **"Pas de réservation"**.

👉 Avec FastAPI, **tout ça se fait vite et sans prise de tête ! 🚀😃**




#8

### **Changer un utilisateur dans une appli 🔄👤**

Parfois, on veut **modifier des infos** dans une appli.

📌 **Exemples faciles :**

* 🎮 Changer le **pseudo d’un joueur**.
* 🏬 Mettre à jour **l’adresse de livraison**.

👉 On va voir comment faire ça avec FastAPI !

Ici, on va apprendre **à modifier un utilisateur déjà existant** en envoyant **ses nouvelles infos**.


---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
@app.post("/user/{user_id}")
def update_user(
    user_id: int,
    user: UserBody,
    db: Session = Depends(get_db),
):
    db_user = (
        db.query(User).filter(
            User.id == user_id
        ).first()
    )
...
```

🧐 **Regardons chaque ligne et expliquons chaque élément avec des images simples !** 👇  

---

## **📌 Explication détaillée du code ligne par ligne**  

---

### **1️⃣ Définition du point d’entrée (endpoint) 📡**  
```python
@app.post("/user/{user_id}")
```
➡️ **Explication simple** :

* `@app.post("/user/{user_id}")` → C’est **une porte d’entrée** pour **demander à modifier un utilisateur**.
* `"/user/{user_id}"` → Le `{user_id}` veut dire qu’on attend **un numéro précis** pour savoir **quel utilisateur changer**.
 

💡 **Petit exemple** :
C’est comme aller **changer son abonnement au guichet 🏬** :
1️⃣ Tu donnes ton **numéro de client (`user_id`)**.
2️⃣ Le responsable **regarde ton compte**.
3️⃣ Il **met à jour les infos**.


---

### **2️⃣ Création de la fonction qui va modifier l’utilisateur 🔄**  
```python
def update_user(
    user_id: int,
    user: UserBody,
    db: Session = Depends(get_db),
):
```
➡️ **Explication simple** :
* `def update_user(...)` → C’est **une boîte magique** qui va **modifier un utilisateur**.
* `user_id: int` → On attend **un numéro (int)** pour savoir **quel utilisateur changer**.
* `user: UserBody` → On attend **les nouvelles infos** (comme un nouveau nom ou email) dans un modèle `UserBody`.
* `db: Session = Depends(get_db)` → `db`, c’est **le carnet où sont notés tous les utilisateurs** (la base de données).


💡 **Petit exemple** :
C’est comme **changer son adresse à la banque 🏦** :
1️⃣ Tu donnes ton **numéro de compte (`user_id`)**.
2️⃣ Tu dis **ce que tu veux modifier (`UserBody`)**.
3️⃣ Le banquier **ouvre les fichiers (`db`) pour tout mettre à jour**.
 

---

### **3️⃣ Chercher l’utilisateur dans la base de données 🔎**  
```python
db_user = (
    db.query(User).filter(
        User.id == user_id
    ).first()
)
```
➡️ **Explication simple** :

* `db.query(User)` → On regarde **tous les utilisateurs**.
* `.filter(User.id == user_id)` → On garde **celui avec le bon numéro**.
* `.first()` → On **prend le premier trouvé**.

💡 **Petit exemple** :
C’est comme **chercher un invité à un mariage 👰🎩** :
1️⃣ Tu ouvres **la liste (`db.query(User)`)**.
2️⃣ Tu cherches **un nom précis (`filter`)**.
3️⃣ Dès que tu le trouves, **tu t’arrêtes (`first()`)**.


---

### **Pourquoi `POST` pour modifier ? 🤔**

Dans une API, on peut **changer une info** de plusieurs façons :

* **PUT** → On **remplace tout** (comme une feuille effacée et réécrite).
* **PATCH** → On **modifie juste un petit bout**.
* **POST** → Sert normalement à **ajouter**, mais ici, on l’utilise aussi pour **modifier**.

📌 **Pourquoi `POST` ici ?**
Parce que c’est **plus simple** pour l’auteur, et ça évite de **mémoriser plein de méthodes différentes**.

💡 **Petit exemple** :
C’est comme **changer un plat au resto 🍽️** :

* **PUT** → Tu **repasses toute la commande**.
* **PATCH** → Tu **changes juste la sauce**.
* **POST** → Tu **donnes une nouvelle commande avec les changements**.

---

## **Pourquoi c’est utile ? 🤔**

✅ On peut **changer un utilisateur facilement** avec ses nouvelles infos.
✅ On **le cherche d’abord** pour ne pas **changer la mauvaise personne**.
✅ Avec `POST`, **c’est plus simple** : une seule méthode pour tout envoyer.
 

---

## **📌 Petit résumé 🎯**

📌 **FastAPI peut modifier un utilisateur avec `POST`** en envoyant ses nouvelles infos.
📌 **On cherche d’abord l’utilisateur**, puis on **fait les changements**.
📌 Le choix de `POST` est fait pour **garder les choses simples**.

💡 **Petit exemple avec un abonnement 📞** :
1️⃣ Tu donnes ton **numéro de compte (`user_id`)** au service client.
2️⃣ Tu dis que tu veux **changer ton adresse ou ton forfait (`UserBody`)**.
3️⃣ Le conseiller **cherche ton compte (`db`)** et **fait la mise à jour**.

👉 Avec FastAPI, **c’est rapide et facile ! 🚀😃**



#9

### **🛑 Vérifier si l’utilisateur existe avant de changer quoi que ce soit 👤❓**

Avant de modifier un utilisateur, il faut **vérifier qu’il existe**.
Sinon, on pourrait **essayer de changer quelqu’un qui n’est pas là** !


📌 **Exemples simples :**

* 🎮 Avant de changer un équipement, il faut **vérifier que le joueur existe**.
* 📸 Pour changer une légende, la **photo doit être enregistrée**.
* 🏬 Pour modifier une adresse, il faut **un compte actif**.

👉 Si l’utilisateur **n’existe pas**, on lui **envoie un message clair**, pas un bug 💥.

---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
if db_user is None:
    raise HTTPException(
        status_code=404,
        detail="User not found"
    )
```

🧐 **Regardons chaque ligne et expliquons chaque élément avec des analogies faciles !** 👇  

---

## **📌 Explication détaillée du code ligne par ligne**  

---

### **1️⃣ On vérifie si l’utilisateur existe 🔎**

```python
if db_user is None:
```

➡️ **Explication simple** :

* `if` veut dire **"Si"** en anglais. Il sert à **vérifier quelque chose**.
* `db_user is None` → On regarde si `db_user` est **vide**, donc si **l’utilisateur n’a pas été trouvé**. 

💡 **Petit exemple** :
C’est comme **chercher un colis à la poste 📦** :

* S’il est là, **on le donne**.
* S’il n’existe pas, **on dit qu’il y a un souci**.

👉 Ici, c’est pareil :

* Si l’utilisateur **existe**, on **le modifie**.
* Sinon, on **prévient qu’il manque**.

---

### **2️⃣ Lever une exception (envoyer un message d’erreur) 🚨**  
```python
raise HTTPException(
    status_code=404,
    detail="User not found"
)
```
➡️ **Explication simple** :

* `raise` → Ça veut dire **lancer une erreur** (signaler un souci).
* `HTTPException(...)` → Ça envoie **un message d’erreur clair** à l’appli.
* `status_code=404` → Le code **404 veut dire "pas trouvé"**.
* `detail="User not found"` → C’est le **message qui explique le problème**.

💡 **Petit exemple** :
C’est comme **au guichet d’un aéroport 🏢✈️** :

* Si le billet est bon, **tu montes dans l’avion**.
* Si le billet **n’existe pas**, on te dit : **"Désolé, il n’existe pas"**.

👉 FastAPI fait pareil :

* Si l’utilisateur **existe**, on continue.
* Sinon, on **envoie une erreur 404** : **"Utilisateur introuvable"**.

---

## **Pourquoi c’est important ? 🤔**

✅ On **évite les erreurs** en ne modifiant pas un utilisateur qui n’existe pas.
✅ L’appli **explique le problème** au lieu de planter.
✅ Le message **404 aide les développeurs** à savoir ce qui ne va pas.

---

## **📌 Petit résumé 🎯**

📌 **FastAPI vérifie d’abord si l’utilisateur existe**.
📌 **S’il n’existe pas, il envoie une erreur 404** ("Utilisateur introuvable").
📌 Ça évite que l’appli **plante** et **explique mieux les erreurs**.

💡 **Petit exemple avec une bibliothèque 📚** :
1️⃣ Tu demandes **un livre**.
2️⃣ Le bibliothécaire **cherche dans la base**.
3️⃣ S’il l’a, **il te le donne**.
4️⃣ Sinon, il dit : **"Ce livre n’est pas dans notre catalogue"** (erreur 404).

👉 Avec FastAPI, **tout ça se fait vite et tout seul ! 🚀😃**


#10

### **🔄 Modifier un utilisateur dans la base 👤**

Parfois, on veut **changer ses infos** dans une appli.

📌 **Exemples simples :**

* 📸 Changer le nom d’un album.
* 🏪 Mettre à jour une adresse de livraison.

👉 Ici, on va voir **comment modifier le nom et l’email d’un utilisateur** dans la base de données.


---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
db_user.name = user.name
db_user.email = user.email
db.commit()
db.refresh(db_user)
return db_user
```

🧐 **Regardons chaque ligne et expliquons chaque élément avec des analogies simples !** 👇  

---

## **📌 Explication détaillée du code ligne par ligne**  

---

### **1️⃣ Modifier le nom de l’utilisateur 🔤**  
```python
db_user.name = user.name
```
➡️ **Explication simple** :

* `db_user` = **l’utilisateur trouvé dans la base**.
* `db_user.name = user.name` = **on remplace l’ancien nom par le nouveau**.


💡 **Petit exemple** :
C’est comme **changer le nom d’un fichier 💾** :
1️⃣ Tu l’ouvres (comme l’utilisateur).
2️⃣ Tu **écris un nouveau nom**.
3️⃣ L’ancien est **remplacé**.
  

---

### **2️⃣ Modifier l’email de l’utilisateur 📧**  
```python
db_user.email = user.email
```
➡️ **Explication simple** :

* Comme pour le nom, on **change l’email**.
* `db_user.email = user.email` = **le nouvel email remplace l’ancien**.

💡 **Petit exemple** :
C’est comme **changer ton email sur un site 🌍** :
1️⃣ Tu vas dans les **paramètres**.
2️⃣ Tu écris **ton nouvel email**.
3️⃣ Le site **remplace l’ancien**.

---

### **3️⃣ Enregistrer les modifications dans la base de données 💾**  
```python
db.commit()
```
➡️ **Explication simple** :

* `db.commit()` = **on confirme les changements**, ils deviennent **officiels**.
* Avant ça, les changements sont juste **en attente** et peuvent encore **être annulés**.


💡 **Petit exemple** :
C’est comme **signer un contrat ✍️** :

* Avant de signer, tu peux **changer d’avis**.
* Une fois signé, **tout est validé**.

---

### **4️⃣ Rafraîchir les données pour voir les changements 🔄**  
```python
db.refresh(db_user)
```
➡️ **Explication simple** :

* `db.refresh(db_user)` = **on recharge l’utilisateur** depuis la base pour être sûr que **tout est bien à jour**.
* Comme ça, on a **les infos les plus récentes**.


💡 **Petit exemple** :
C’est comme **actualiser une page web 🔄** :

* Tu changes une info sur le site.
* Tu **rafraîchis** pour voir **les nouvelles données**.
 

---

### **5️⃣ Retourner l’utilisateur mis à jour ✅**  
```python
return db_user
```
➡️ **Explication simple** :

* `return db_user` = **l’appli renvoie l’utilisateur** avec ses nouvelles infos.
* Ça permet **de voir tout de suite les changements** dans l’appli.


💡 **Petit exemple** :
C’est comme **recevoir une confirmation après un changement 📩** :

* Tu modifies une info.
* Le site **te montre tout de suite la nouvelle version**.


---

## **Pourquoi c’est utile ? 🤔**

✅ On peut **changer les infos d’un utilisateur sans refaire un compte**.
✅ Les changements sont **enregistrés pour de bon**.
✅ On **rafraîchit** pour être sûr que tout est bien à jour.
✅ L’appli **montre tout de suite les nouvelles infos**.


---

## **📌 Petit résumé 🎯**

📌 **FastAPI permet de modifier un utilisateur** en changeant ses infos dans la base.
📌 On fait les **changements**, puis on les **valide avec `commit()`**.
📌 On **rafraîchit** pour vérifier que tout est bon.
📌 Et on **renvoie l’utilisateur mis à jour** pour voir les nouvelles infos.


💡 **Petit exemple avec un changement d’adresse 🏡** :
1️⃣ Tu vas à la **mairie pour dire que tu déménages**.
2️⃣ Tu donnes ta **nouvelle adresse**.
3️⃣ L’administration **met à jour ton dossier**.
4️⃣ Tu reçois **un papier avec la nouvelle adresse confirmée**.

👉 Avec FastAPI, **tout ça se fait vite et automatiquement ! 🚀😃**



#11

### **🗑️ Supprimer un utilisateur 👤❌**

Parfois, on veut **effacer un utilisateur** d’une appli.

📌 **Exemples simples :**

* 🎮 Supprimer un **personnage** qu’on ne joue plus.
* 🏪 Effacer un **ancien client** inactif.

👉 Ici, on va apprendre à **le supprimer de la base** avec une demande spéciale : `DELETE`.

---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
@app.delete("/user")
def delete_user(
    user_id: int, db: Session = Depends(get_db)
):
    db_user = (
        db.query(User).filter(
            User.id == user_id
        ).first()
    )
```

🧐 **Regardons chaque ligne et expliquons chaque élément avec des analogies simples !** 👇  

---

## **📌 Explication détaillée du code ligne par ligne**  

---

### **1️⃣ Définition du point d’entrée (endpoint) 📡**  
```python
@app.delete("/user")
```
➡️ **Explication simple** :

* `@app.delete("/user")` → C’est **une porte d’entrée** pour **demander la suppression d’un utilisateur**.
* `delete` = on veut **effacer quelque chose**.

💡 **Petit exemple** :
C’est comme **appuyer sur "Supprimer" ⌫** :
1️⃣ Tu veux **effacer un fichier**.
2️⃣ Tu cliques sur **Supprimer**.
3️⃣ Le fichier **disparaît**.

👉 Ici, c’est pareil, mais pour **un utilisateur dans la base**.
 

---

### **2️⃣ Création de la fonction qui va supprimer l’utilisateur 🛠️**  
```python
def delete_user(
    user_id: int, db: Session = Depends(get_db)
):
```
➡️ **Explication simple** :

* `def delete_user(...)` → On crée une **fonction** (un outil pour **supprimer un utilisateur**).

* `user_id: int` → On attend **un numéro (`int`)** pour savoir **quel utilisateur supprimer**.
* `db: Session = Depends(get_db)` → `db`, c’est **le lien avec la base de données**.

📌 **Explication de `Depends(get_db)`** :

* Ça veut dire que la fonction **a besoin de la base de données** pour marcher.
* Comme ça, on peut **lire et modifier les infos** sans **rouvrir la base à chaque fois**.


💡 **Petit exemple** :
C’est comme **retirer un élève d’une liste de classe 🏫** :
1️⃣ Tu donnes **son nom (`user_id`)**.
2️⃣ Le directeur regarde **dans le registre (`db`)**.
3️⃣ S’il est là, **on le retire** de la liste.

---

### **3️⃣ Chercher l’utilisateur à supprimer 🔎**  
```python
db_user = (
    db.query(User).filter(
        User.id == user_id
    ).first()
)
```
➡️ **Explication simple** :

* `db.query(User)` → On regarde **tous les utilisateurs** dans la base de données.
* `.filter(User.id == user_id)` → On garde **seulement l’utilisateur avec le bon numéro**.
* `.first()` → On prend **le premier qu’on trouve**.

💡 **Petit exemple** :
C’est comme **chercher un fichier sur ton ordi 💾** :
1️⃣ Tu ouvres **le dossier** (`db.query(User)`).
2️⃣ Tu **filtre pour voir le bon nom** (`filter`).
3️⃣ Tu prends **le premier fichier trouvé** (`first()`) pour le supprimer.

---

## **Pourquoi c’est utile ? 🤔**

✅ On peut **supprimer un utilisateur pour de bon**.
✅ On **vérifie qu’il existe** avant de le supprimer.
✅ Ça évite de **supprimer quelque chose qui n’est pas là**.


---

## **📌 Petit résumé 🎯**

📌 **FastAPI peut supprimer un utilisateur avec `DELETE`**.
📌 On **vérifie s’il existe** avant de l’effacer.
📌 S’il est là, **on le sélectionne dans la base** pour le supprimer. 

💡 **Petit exemple avec une poubelle 🗑️** :
1️⃣ Tu **cherches un fichier** à supprimer.
2️⃣ Tu **vérifies qu’il est bien là**.
3️⃣ Tu le **mets à la corbeille**.

👉 Avec FastAPI, **tout ça se fait vite et tout seul ! 🚀😃**



#12

### **🧐 Vérifier avant de supprimer 👤❓**

Avant de supprimer un utilisateur, il faut **s’assurer qu’il existe**.
Sinon, l’appli pourrait **planter** si on tente de **supprimer quelqu’un qui n’est pas là** ❌💥.


📌 **Exemples simples :**

* 🎮 Pour **effacer un personnage**, il faut d’abord **vérifier qu’il existe**.
* 📸 Avant de **supprimer un album**, il faut voir s’il est **enregistré**.
* 🏪 Si un client veut **supprimer son compte**, on doit **vérifier qu’il existe**.


Si **l’utilisateur n’existe pas**, il faut **montrer un message d’erreur** pour **éviter que l’appli plante** ou ne réponde plus.

---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
if db_user is None:
    raise HTTPException(
        status_code=404,
        detail="User not found"
    )
```

🧐 **Regardons chaque ligne et expliquons chaque élément avec des analogies simples !** 👇  

---

## **📌 Explication détaillée du code ligne par ligne**  

---
### **1️⃣ Vérifier si l’utilisateur existe 🔎**

```python
if db_user is None:
```

➡️ **Explication simple** :

* `if` veut dire **"Si"** en anglais. Il sert à **vérifier quelque chose** avant de faire une action.
* `db_user is None` → Ça veut dire : **“L’utilisateur n’existe pas dans la base”**.
* `None` = **rien** en Python, comme **un tiroir vide**. 

💡 **Petit exemple** :
C’est comme **chercher un colis à la poste 📦** :

* S’il est enregistré, **on peut le récupérer**.
* S’il n’existe pas, **il n’y a rien à donner**.

Ici, on **cherche un utilisateur** dans la base :

* S’il existe, on peut **le supprimer**.
* S’il n’existe pas, on **envoie un message d’erreur** pour dire qu’il manque.

---

### **2️⃣ Lever une exception (envoyer un message d’erreur) 🚨**  
```python
raise HTTPException(
    status_code=404,
    detail="User not found"
)
```
➡️ **Explication simple** :

* `raise` = **lancer une erreur** pour **arrêter le programme** et **montrer un message clair**.
* `HTTPException(...)` → Sert à **envoyer une erreur bien expliquée**.
* `status_code=404` → Le code **404 veut dire "introuvable"** (comme une page web qui n’existe pas).
* `detail="User not found"` → C’est **le message qui dit** que **l’utilisateur n’a pas été trouvé**.
 

💡 **Petit exemple** :
C’est comme **à l’aéroport 🏢✈️** :

* Si le passager a **un vrai billet**, il monte dans l’avion.
* Sinon, l’agent dit : **"Désolé, pas de billet valide"**.

👉 FastAPI fait pareil :

* Si l’utilisateur **existe**, on le supprime.
* Sinon, on envoie une **erreur 404**.

---

## **Pourquoi c’est utile ? 🤔**

✅ On **évite les erreurs** en ne supprimant pas un utilisateur qui n’existe pas.
✅ L’appli **montre un message clair** au lieu de planter.
✅ L’erreur **404 aide les développeurs** à comprendre ce qui ne va pas.

---

## **📌 Petit résumé 🎯**

📌 **FastAPI vérifie d’abord si l’utilisateur existe** avant de le supprimer.
📌 S’il n’existe pas, il envoie une **erreur 404** ("Utilisateur introuvable").
📌 Ça évite les bugs et **explique clairement le problème**.

💡 **Petit exemple avec une bibliothèque 📚** :
1️⃣ Tu demandes **un livre**.
2️⃣ Le bibliothécaire cherche **dans la base**.
3️⃣ S’il l’a, **il te le donne**.
4️⃣ Sinon, il dit : **"Ce livre n’est pas dans le catalogue"** (erreur 404).

👉 Avec FastAPI, **tout ça se fait vite et tout seul ! 🚀😃**



#13

### **🗑️ Supprimer un utilisateur de la base 👤❌**

Pour supprimer un utilisateur, il faut :
1️⃣ **Le retirer de la base** (comme jeter un fichier).
2️⃣ **Confirmer la suppression** (comme vider la poubelle).
3️⃣ **Envoyer une réponse claire** pour dire que c’est bien fait ✅.

📌 **Exemples simples :**

* 🎮 Supprimer un **personnage** qu’on n’utilise plus.
* 📆 Effacer un **utilisateur** qui ne gère plus de tâches.

👉 Avec FastAPI, **ça se fait vite et sans erreur 🚀**.

---

## **💻 Le code utilisé dans FastAPI 🖥️**  

```python
db.delete(db_user)
db.commit()
return {"detail": "User deleted"}
```

🧐 **Regardons chaque ligne et expliquons chaque élément avec des analogies simples !** 👇  

---

## **📌 Explication détaillée du code ligne par ligne**  

---

### **1️⃣ Supprimer l’utilisateur de la base 🗑️**

```python
db.delete(db_user)
```

➡️ **Explication simple** :

* `db.delete(db_user)` = On **enlève l’utilisateur** de la base de données. 
* `db_user` = c’est **l’utilisateur qu’on a trouvé avant** avec son numéro (`user_id`).

💡 **Petit exemple** :
C’est comme **supprimer un contact sur ton téléphone 📱** :
1️⃣ Tu ouvres la liste.
2️⃣ Tu choisis le bon nom.
3️⃣ Tu appuies sur **"Supprimer"**, et il disparaît.

👉 L’appli fait pareil, mais avec **un utilisateur dans la base**.

---

### **2️⃣ Confirmer la suppression dans la base de données ✅**  
```python
db.commit()
```
➡️ **Explication simple** :

* `db.commit()` = **on valide pour de vrai la suppression**.
* Avant ça, c’est juste **préparé**, mais **pas encore fait**.

💡 **Petit exemple** :
C’est comme **vider la corbeille 🗑️** :

* Le fichier est supprimé, mais **juste mis de côté**.
* Pour **le supprimer pour de bon**, tu dois **vider la corbeille** → c’est ce que fait `db.commit()`.


---

### **3️⃣ Envoyer une confirmation à l’application 🔄**  
```python
return {"detail": "User deleted"}
```
➡️ **Explication simple** :

* `return` = **on renvoie une réponse**.
* `{"detail": "User deleted"}` = **message clair** pour dire que l’utilisateur a bien été supprimé.  

💡 **Petit exemple** :
C’est comme **recevoir un reçu après un achat 🛒** :

* Le reçu **confirme que tout s’est bien passé**.
* Ici, l’appli reçoit un **message pour dire que l’utilisateur a été supprimé**.


---

## **Pourquoi c’est utile ? 🤔**

✅ L’utilisateur est **supprimé pour de bon**.
✅ On **évite les oublis** en confirmant la suppression.
✅ Un **message clair** dit que tout s’est bien passé.


---

## **📌 Petit résumé 🎯**

📌 **FastAPI supprime un utilisateur en 3 étapes :**
1️⃣ On le **retire avec `delete()`**.
2️⃣ On **valide avec `commit()`**.
3️⃣ On **envoie un message** pour dire que c’est fait.

💡 **Exemple avec une poubelle 🗑️** :
1️⃣ Tu **mets le fichier à la poubelle**.
2️⃣ Tu **vides la corbeille**.
3️⃣ Tu vois le message : **"Fichier supprimé"**.

👉 Avec FastAPI, **tout ça se fait automatiquement et en toute sécurité ! 🚀😃**



#14

### **🚀 Les actions CRUD avec FastAPI et SQLAlchemy 🔄**

Dans une appli, on doit **gérer les infos des utilisateurs**, comme dans un jeu 🎮. On peut :

* **Ajouter un utilisateur** (comme créer un nouveau profil).
* **Lire ses infos** (comme voir ses scores).
* **Changer ses infos** (comme modifier son pseudo).
* **Supprimer un utilisateur** (comme effacer un compte qu’on n’utilise plus).

### **🔄 CRUD : les 4 actions magiques des applis**

CRUD veut dire :

* **C**reate → Créer une donnée 📥.
* **R**ead → Lire une donnée 📖.
* **U**pdate → Changer une donnée ✍️.
* **D**elete → Supprimer une donnée 🗑️.

On utilise des **endpoints** (des portes d’entrée 📡) pour faire toutes ces actions.
 

---

### **🔗 FastAPI + SQLAlchemy : une super équipe pour les données**

📌 **FastAPI** aide l’appli à **parler avec la base de données**.
📌 **SQLAlchemy** sert à **bien ranger et gérer les données**.

### **🍽️ FastAPI + SQLAlchemy : comme au resto !**

💡 Imagine ton appli comme un **restaurant** :

* **FastAPI, c’est le serveur** (il prend la commande).
* **SQLAlchemy, c’est la cuisine** (il prépare les données).

Quand un utilisateur fait quelque chose (comme s’inscrire),
**FastAPI envoie la commande** et **SQLAlchemy fait le travail dans la base**.

---

### **📡 Les endpoints : des portes spéciales pour les données 🚪**

Chaque action (ajouter, lire, changer, supprimer) passe par un **endpoint** :
c’est une **adresse spéciale** où l’appli envoie sa demande.

### **📱 Des endpoints partout dans les applis !**

📌 **Dans un jeu vidéo 🎮** → Un endpoint pour créer un joueur, un autre pour voir ses stats.
📌 **Dans un site de shopping 🛒** → Un endpoint pour enregistrer un client, un autre pour changer son adresse.

Grâce à ces **endpoints (portes spéciales)**, les applis **deviennent interactives** et peuvent gérer les utilisateurs facilement.
!  

---

### **🎯 Une API complète pour gérer les utilisateurs**

Avec **FastAPI et SQLAlchemy**, on peut :
✅ **Ajouter un utilisateur**.
✅ **Lire ses infos** quand il se connecte.
✅ **Changer ses données** (comme son pseudo).
✅ **Supprimer son compte** s’il quitte l’appli.

### **📖 Gérer les données comme un carnet d’adresses**

💡 C’est comme un **carnet d’adresses** :

* Tu peux **ajouter** un contact.
* Tu peux **voir ses infos**.
* Tu peux **changer son numéro**.
* Tu peux **l’effacer** de ta liste.

Avec **FastAPI**, tout ça se fait **vite et tout seul ! 🚀** 😃



#15

### **🚀 Lancer FastAPI pour faire tourner l’appli 🖥️**

Quand les **actions CRUD** (Créer, Lire, Changer, Supprimer) sont prêtes,
il faut **démarrer le serveur** pour que l’appli fonctionne vraiment !

### **📡 Un serveur, c’est quoi ?**

Un **serveur** est un programme qui **écoute et répond aux demandes** (comme un assistant).

Par exemple :

* 🎮 Dans un jeu, il **enregistre les scores**.
* 📸 Dans une appli photo, il **montre les images** des utilisateurs.

### **⚙️ Le serveur FastAPI en action**

Le **serveur FastAPI** sert à **répondre aux demandes** des utilisateurs,
comme **ajouter un compte** ou **voir les profils**.


---

## **💻 La commande utilisée pour démarrer le serveur**  

```bash
$ uvicorn main:app
```

🧐 **Regardons chaque partie de cette commande et expliquons-la avec des analogies simples !** 👇  

---

## **📌 Explication détaillée de la commande ligne par ligne**  

---

### **1️⃣ `$` : Le symbole pour taper une commande en ligne de commande 🖥️**  
```bash
$ uvicorn main:app
```
### **➡️ À quoi sert le symbole `$` ?**

* Le **`$`** montre qu’on tape une **commande dans le terminal** (un endroit pour parler à l’ordi).
* Il **ne faut pas taper le `$`** : il est là juste pour indiquer que c’est une commande.

### **🎙️ Le terminal, comme un assistant vocal**

💡 C’est comme **parler à Siri ou Google** :
1️⃣ Tu l’appelles.
2️⃣ Tu dis ce que tu veux.
3️⃣ Il **fait ce que tu demandes**.

Ici, on parle **au terminal** pour **lancer le serveur**.


---

### **2️⃣ `uvicorn` : Le moteur qui fait tourner FastAPI ⚙️**  
```bash
$ uvicorn main:app
```
### **➡️ À quoi sert `uvicorn` ?**

* **`uvicorn`** est un **outil spécial** pour **démarrer un serveur FastAPI**.
* Il **écoute les demandes** et **envoie les réponses** 📡.

### **🚗 `uvicorn`, c’est comme un moteur de voiture**

💡 C’est comme **démarrer une voiture** :
1️⃣ Tu **tournes la clé** (`$ uvicorn ...`).
2️⃣ **Le moteur démarre** (`uvicorn` lance le serveur).
3️⃣ Tu peux **conduire** (l’appli est prête à répondre).

### **🛑 Sans `uvicorn`, l’appli ne démarre pas**

Sans **`uvicorn`**, l’appli **n’a pas de moteur** et ne peut **pas répondre aux demandes** des utilisateurs.


---

### **3️⃣ `main:app` : Dire où se trouve l’application 🏠**  
```bash
$ uvicorn main:app
```
### **📁 Que veulent dire `main` et `app` ?**

* **`main`** → C’est le **nom du fichier** où est l’appli (`main.py`).
* **`app`** → C’est le **nom de l’appli** dans ce fichier.

### **📦 `main` et `app`, comme une adresse pour livrer**

💡 C’est comme **une adresse pour un livreur** :
1️⃣ **`main`** = la **ville** de l’appli.
2️⃣ **`app`** = la **rue et la maison** où elle se trouve.

### **📍 Que fait `main:app` ?**

Avec **`main:app`**, on dit à `uvicorn` **où est l’appli** pour qu’il puisse **la lancer**.


---

### **🎯 Résumé rapide et imagé**

📌 **FastAPI a besoin d’un moteur**, et c’est **`uvicorn`** qui le démarre.
📌 **La commande `$ uvicorn main:app`** dit **où est l’appli** et **lance le serveur**.
📌 Une fois lancé, l’appli peut **répondre aux demandes** (comme ajouter un compte ou voir des infos).

### **🍽️ L’application, comme un resto**

1️⃣ **Tu ouvres le resto** (`uvicorn` démarre l’appli).
2️⃣ **Les serveurs attendent les clients** (le serveur écoute).
3️⃣ **Un client commande un plat** (l’utilisateur fait une demande).
4️⃣ **La cuisine prépare et sert** (FastAPI répond).


### **🚀 L’appli est prête !**

Grâce à **FastAPI et Uvicorn**, notre appli est **en ligne** et peut être **utilisée tout de suite ! 😃**




#16

### **🚀 Tu sais faire du CRUD avec FastAPI ! 🔄**

Tu sais maintenant **Créer, Lire, Changer et Supprimer** des utilisateurs avec FastAPI.
Tu peux **faire des applis interactives** qui utilisent une **base de données 📦** !


### **📌 Ton appli devient super vivante !**

* Elle **n’est plus figée** (pas juste du texte ou des images).
* Elle peut **réagir** quand un utilisateur ajoute un compte ou change son profil.
* Elle est **connectée aux données** et les **gère toute seule**.

### **💡 Des applis qui font du CRUD**

* **📆 Appli de tâches** → Ajouter une tâche, la modifier ou la supprimer.
* **🎮 Jeu en ligne** → Créer un perso, voir ses stats, changer son équipement.

Elles utilisent toutes **CRUD** pour **gérer les infos** des utilisateurs.

---

### **🔗 FastAPI + SQLAlchemy : une super équipe**

📌 **FastAPI** gère ce que veulent les utilisateurs (voir, changer, supprimer).
📌 **SQLAlchemy** range et garde les infos dans la **base de données**.

### **🏬 FastAPI + SQLAlchemy, comme un supermarché**

💡 Imagine un **supermarché** :
1️⃣ **FastAPI est le caissier** (il prend la commande).
2️⃣ **SQLAlchemy est l’entrepôt** (il garde et donne les infos).

### **📤 Comment ça marche ?**

Quand un utilisateur fait une action,
**FastAPI envoie la demande à SQLAlchemy**,
qui **va chercher l’info** et la **renvoie à l’utilisateur**.


---

### **🛠️ Tu peux maintenant créer des applis super puissantes ! 💡**

✅ Tu sais **faire des endpoints** (les portes pour les données).
✅ Tu sais **utiliser SQLAlchemy** pour la base.
✅ Tu peux faire des **applis dynamiques et connectées** !

### **🏗️ Comme un jeu de construction**

1️⃣ Tu as toutes les **briques** (FastAPI, SQLAlchemy, CRUD).
2️⃣ Tu sais **les assembler** pour faire un projet.
3️⃣ Tu peux créer des **applis encore plus grandes** ! 

### **🚀 Tu as tout ce qu’il faut !**

Avec **FastAPI et SQLAlchemy**, tu peux créer des applis **rapides, modernes et super efficaces ! 😃**
