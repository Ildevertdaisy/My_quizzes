#1

FastAPI, câ€™est comme un chef dâ€™orchestre ğŸµ qui fait parler lâ€™appli avec les gens ğŸ“±ğŸ’¬. Par exemple, si quelquâ€™un veut ajouter un jeu vidÃ©o dans une bibliothÃ¨que, il envoie des infos (comme le nom du jeu ou lâ€™annÃ©e de sortie). FastAPI vÃ©rifie que tout est bien rempli avant de dire oui.

### ğŸ“¦ Les "modÃ¨les" pour vÃ©rifier les donnÃ©es

FastAPI utilise **Pydantic** (une boÃ®te magique pour bien ranger et vÃ©rifier les infos). Câ€™est comme un filtre ou une rÃ¨gle du jeu ğŸ¯ : si les infos envoyÃ©es ne sont pas correctes, FastAPI dit non tout de suite ğŸš«.

### ğŸ® Exemple dâ€™appli : une boutique de jeux en ligne

Imagine une boutique oÃ¹ tu peux acheter des jeux ğŸ®. Quand tu veux en commander un, tu remplis un petit formulaire avec :

- **Le nom du jeu** (ex : "Super Aventure 3")
- **La plateforme** (ex : "Nintendo Switch")

Si tu Ã©cris "vingt-neuf euros" au lieu de "29.99", FastAPI voit lâ€™erreur et tâ€™envoie un message ğŸ“¢ : "Le prix doit Ãªtre un chiffre, pas des mots !" Câ€™est comme un vendeur qui vÃ©rifie ta commande et te corrige gentiment.

### âŒ Que fait FastAPI en cas dâ€™erreur ?

Si les infos ne respectent pas les rÃ¨gles, FastAPI renvoie une erreur tout seul ğŸ›‘.
Par exemple :

- Tu veux ajouter une tÃ¢che ğŸ“‹
- Tu Ã©cris "Faire les courses" mais tu oublies la date ğŸ—“ï¸
- FastAPI dit : "Erreur âŒ : il manque la date !"

Câ€™est comme quand tu oublies un truc dans un formulaire en ligne âœï¸. Le site te montre un message rouge ğŸš¦ : "Remplis ce champ avant de continuer !"

### ğŸµ Exemple avec une appli de musique

Tu as une appli pour crÃ©er des playlists ğŸ§. Pour ajouter une chanson, tu donnes :

- Le **titre** ğŸ¶
- Lâ€™**artiste** ğŸ¤
- La **durÃ©e** en minutes â³

Si tu ajoutes une chanson sans la durÃ©e, FastAPI dit : "Oups, il manque la durÃ©e !" â³âŒ
Câ€™est comme vouloir mettre une musique sans le son ğŸµâŒ.

### ğŸ“Š Pourquoi câ€™est utile ?

FastAPI vÃ©rifie les infos tout seul pour Ã©viter les erreurs. Câ€™est comme un gardien de porte ğŸšª : il laisse passer seulement les bonnes infos et bloque celles qui sont fausses ou incomplÃ¨tes ğŸš§ğŸ”.

En rÃ©sumÃ©, FastAPI avec Pydantic, câ€™est comme un prof ğŸ“–âœ… : il vÃ©rifie ton exercice. Sâ€™il manque un truc ou si câ€™est mal Ã©crit, il te dit : "Corrige et recommence !" ğŸ˜Š

#2

---

### ğŸ“¢ Personnaliser les erreurs dans FastAPI

Dans une appli de **livraison de repas ğŸ•**, si quelquâ€™un oublie son adresse ou met trop de chiffres dans son numÃ©ro, FastAPI doit lui dire quâ€™il y a un problÃ¨me.

FastAPI peut montrer un message spÃ©cial quand quelque chose ne va pas. Il gÃ¨re les erreurs et explique ce quâ€™il faut corriger, comme dans lâ€™exemple de code juste en dessous !

---

### ğŸ“ **Le code expliquÃ© avec des mots simples**

```python
import json
from fastapi import Request, status
from fastapi.exceptions import RequestValidationError
from fastapi.responses import PlainTextResponse
```

ğŸ“Œ **Que fait cette partie ?**

- **`import json`** â†’ On utilise une boÃ®te Ã  outils appelÃ©e **json** (elle sert Ã  ranger les infos en texte que la machine peut comprendre).

- **`from fastapi import Request, status`** â†’ On prend deux outils de FastAPI :
  - **`Request`** : comme un facteur ğŸ“¬ qui apporte ce que lâ€™utilisateur envoie.
  - **`status`** : une liste de codes pour dire si tout va bien âœ… ou sâ€™il y a une erreur âŒ.
- **`from fastapi.exceptions import RequestValidationError`** â†’ Câ€™est un outil qui repÃ¨re si les infos envoyÃ©es ne suivent pas les rÃ¨gles.
- **`from fastapi.responses import PlainTextResponse`** â†’ Câ€™est une rÃ©ponse en **texte brut**, comme un message SMS tout simple ğŸ“©.

---

### ğŸ”§ **CrÃ©ation dâ€™un gestionnaire dâ€™erreur**

```python
@app.exception_handler(RequestValidationError)
async def validation_exception_handler(
Â Â Â Â request: Request,
Â Â Â Â exc: RequestValidationError
):
```

ğŸ“Œ **Que fait cette partie ?**

- **`@app.exception_handler(RequestValidationError)`** â†’ Ã‡a veut dire : **"HÃ© FastAPI, sâ€™il y a une erreur, utilise cette fonction pour tâ€™en occuper !"** ğŸ› ï¸
- **`async def validation_exception_handler(request: Request, exc: RequestValidationError):`**
  - **`async def`** â†’ La fonction peut attendre sans bloquer tout le reste, comme un cuisinier ğŸ‘¨â€ğŸ³ qui prÃ©pare plusieurs plats en mÃªme temps.
- **`request: Request`** â†’ Câ€™est la demande de lâ€™utilisateur (ex : "Je veux une pizza ğŸ• !").
- **`exc: RequestValidationError`** â†’ Câ€™est lâ€™erreur repÃ©rÃ©e (ex : "Tu as oubliÃ© lâ€™adresse !").

---

### ğŸ“„ **CrÃ©er une rÃ©ponse claire pour lâ€™utilisateur**

```python
Â Â Â Â return PlainTextResponse(
Â Â Â Â Â Â Â Â "This is a plain text response:"
Â Â Â Â Â Â Â Â f" \n{json.dumps(exc.errors(), indent=2)}",
Â Â Â Â Â Â Â Â status_code=status.HTTP_400_BAD_REQUEST,
Â Â Â Â )
```

ğŸ“Œ **Que fait cette partie ?**

- **`return PlainTextResponse(...`** â†’ On envoie un message tout simple pour expliquer lâ€™erreur.
- **`"This is a plain text response:"`** â†’ Câ€™est le dÃ©but du message qui dit : "Voici lâ€™erreur en version texte".
- **`json.dumps(exc.errors(), indent=2)`** â†’
  - **`exc.errors()`** â†’ Donne les dÃ©tails de lâ€™erreur (ex : "Adresse manquante !").
  - **`json.dumps(..., indent=2)`** â†’ Range les infos pour que ce soit bien lisible (comme des notes dans un cahier ğŸ“–).
- **`status_code=status.HTTP_400_BAD_REQUEST`** â†’
  - **`HTTP_400_BAD_REQUEST`** â†’ Câ€™est le code qui veut dire : **"Erreur 400 : infos incorrectes !"** ğŸš«.

---

### ğŸ® Exemple avec une appli de jeux

Tu peux ajouter des **personnages** dans ton jeu ğŸ®. Pour en crÃ©er un, tu donnes :
âœ… Son **nom** (ex : "Super Guerrier")
âœ… Sa **force** (ex : 95)
âœ… Son **niveau** (ex : 10)

Si tu oublies la force ou Ã©cris "fort" au lieu dâ€™un chiffre, lâ€™appli montre :
ğŸ›‘ **"Erreur 400 : La force doit Ãªtre un nombre !"**

Câ€™est exactement ce que fait FastAPI : il repÃ¨re les infos incorrectes et envoie un message clair pour corriger lâ€™erreur.

---

### ğŸ“Œ En rÃ©sumÃ© : pourquoi câ€™est utile ?

âœ”ï¸ **FastAPI repÃ¨re les erreurs tout seul** pour Ã©viter que lâ€™appli ne plante.
âœ”ï¸ **On peut changer le message dâ€™erreur** pour quâ€™il soit plus clair.
âœ”ï¸ **Les utilisateurs comprennent vite ce qui ne va pas**.

Câ€™est comme un agent de cinÃ©ma ğŸ¿ qui dit : "Oups, ton billet câ€™est pour demain !" au lieu de te laisser entrer.

GrÃ¢ce Ã  Ã§a, lâ€™appli est **plus solide et plus facile Ã  utiliser** ğŸš€ !

#3

Dans une appli de **rÃ©servation de train ğŸš†**, la personne doit donner :
âœ… Son nom et prÃ©nom
âœ… La date du voyage ğŸ“…
âœ… Le nombre de places Ã  acheter

Si ces infos ne sont pas bonnes, FastAPI peut le repÃ©rer.

Si quelquâ€™un rÃ©serve sans mettre la date ou Ã©crit "deux" au lieu de **2**, lâ€™appli ne comprend pas ğŸ›‘.

FastAPI dÃ©tecte ces erreurs **automatiquement**, et on peut mÃªme lui dire **quoi rÃ©pondre** quand Ã§a arrive !

---

### ğŸ¯ Que fait ce gestionnaire dâ€™erreur ?

**RequestValidationError**, câ€™est comme un **inspecteur ğŸ“‹** qui vÃ©rifie si tout est bien rempli.
Sâ€™il trouve une erreur, le gestionnaire lâ€™attrape et envoie un message clair Ã  lâ€™utilisateur.

Câ€™est comme un guichetier de train qui dit :
ğŸš« **"Tu as oubliÃ© la date du voyage. Remplis-la avant de continuer !"**

Et la rÃ©ponse sâ€™affiche en **texte simple** (PlainTextResponse), comme un petit **SMS ou ticket ğŸ§¾** qui explique clairement lâ€™erreur.

---

### ğŸ€ Exemple avec une appli de sport

Tu veux rÃ©server un terrain de foot âš½ ou de basket ğŸ€ ?
Tu dois donner :

- Ton **nom**
- La **date et lâ€™heure â°**
- Le **nombre de joueurs** prÃ©sents

Si quelquâ€™un oublie lâ€™heure ou Ã©crit un mot au lieu dâ€™un nombre, FastAPI bloque et montre :
ğŸ”´ **"Erreur : il manque lâ€™heure de la rÃ©servation"**

Câ€™est super utile pour Ã©viter des rÃ©servations incomplÃ¨tes ou fausses !

---

### ğŸ“Œ Pourquoi câ€™est important ?

âœ”ï¸ **Moins dâ€™erreurs** : Les gens voient vite ce quâ€™ils doivent corriger.
âœ”ï¸ **Moins de travail pour les dÃ©veloppeurs** : FastAPI sâ€™en occupe tout seul.
âœ”ï¸ **Lâ€™appli est plus agrÃ©able** : Un bon message aide Ã  corriger sans se fÃ¢cher ğŸ˜Š.

En rÃ©sumÃ©, FastAPI est comme un **agent de contrÃ´le ğŸš¦** : il bloque les mauvaises infos et explique **ce quâ€™il faut corriger** avant de continuer ğŸš€.

#4

### ğŸš€ Quand FastAPI attrape une erreur

Dans une appli pour gÃ©rer ta bibliothÃ¨que ğŸ“š, tu veux ajouter un livre. Tu dois remplir :
âœ… Le **titre** (ex : "Les aventures magiques")
âœ… Lâ€™**auteur** (ex : "Alice Dupont")
âœ… Lâ€™**annÃ©e** (ex : 2022)

Si une info est mauvaise, FastAPI le voit et envoie un message clair.

Si tu fais une erreur, comme :

- Mettre un **chiffre Ã  la place du titre** (ex : `3` au lieu de `"Harry Potter"`)
- Mettre une **annÃ©e bizarre** comme `0`

FastAPI repÃ¨re lâ€™erreur tout de suite et refuse dâ€™enregistrer le livre ğŸ“›.

---

### ğŸ” Comment FastAPI dÃ©tecte lâ€™erreur ?

Si une info est fausse, lâ€™appli envoie une **erreur avec le code `400`**, ce qui veut dire **"Mauvaise demande"** âŒ.

Dans le message dâ€™erreur, on voit plusieurs dÃ©tails importants :

#### ğŸ“Œ **Erreur sur le titre du livre**

```
"type": "string_type"
"loc": ["body", "author"]
"msg": "Input should be a valid string"
"input": 3
```

- **"type": "string_type"** â†’ FastAPI attendait **un texte** ("string"), mais il a reÃ§u **un nombre** Ã  la place.

- **"loc": \["body", "author"]** â†’ Ã‡a montre oÃ¹ est lâ€™erreur : dans le **corps de la demande**, Ã  lâ€™endroit de **lâ€™auteur**.
- **"msg": "Input should be a valid string"** â†’ Le message dit que lâ€™entrÃ©e doit Ãªtre une **phrase**, pas un **chiffre**.
- **"input": 3** â†’ Câ€™est la **mauvaise valeur** envoyÃ©e.

ğŸ›‘ **Exemple avec une appli dâ€™hÃ´tel ğŸ¨**
Tu veux rÃ©server une chambre et tu mets `42` au lieu de `"Alice"` pour le nom.
Lâ€™appli te rÃ©pond : **"Erreur : le nom doit Ãªtre un texte, pas un nombre !"**

---

#### ğŸ“Œ **Erreur sur lâ€™annÃ©e de publication**

```
"type": "greater_than"
"loc": ["body", "year"]
"msg": "Input should be greater than 1900"
"input": 0
"ctx": { "gt": 1900 }
```

- **"type": "greater_than"** â†’ FastAPI voulait une **annÃ©e aprÃ¨s 1900**, mais la valeur Ã©tait trop petite.
- **"loc": \["body", "year"]** â†’ Lâ€™erreur vient du champ **annÃ©e** (`year`).
- **"msg": "Input should be greater than 1900"** â†’ Lâ€™annÃ©e doit Ãªtre **plus grande que 1900**.
- **"input": 0** â†’ Lâ€™utilisateur a mis `0`, ce qui est faux.
- **"ctx": { "gt": 1900 }** â†’ FastAPI rappelle que la valeur attendue est **aprÃ¨s 1900**.

ğŸ“… **Exemple avec une appli de location de voitures ğŸš—**
Tu Ã©cris lâ€™annÃ©e de naissance du conducteur et tu mets `1800` ?
Lâ€™appli te rÃ©pond : **"Erreur : lâ€™annÃ©e doit Ãªtre plus grande que 1900 !"**

---

### âœ… Pourquoi câ€™est important ?

âœ”ï¸ **FastAPI bloque les erreurs avant quâ€™elles fassent des dÃ©gÃ¢ts**.
âœ”ï¸ **Les messages dâ€™erreur sont clairs**, donc faciles Ã  corriger.
âœ”ï¸ **Pas de mauvaises infos** dans la base de donnÃ©es.

Câ€™est comme un **agent de sÃ©curitÃ© ğŸ”** qui vÃ©rifie tout avant de laisser passer. RÃ©sultat : une appli plus fiable ğŸš€ !

#5

### ğŸ”’ Pourquoi cacher les messages dâ€™erreur peut Ãªtre utile ?

Parfois, dire **trop de dÃ©tails** sur une erreur peut Ãªtre **dangereux**.

Exemple : dans une appli bancaire ğŸ¦, si quelquâ€™un met un mauvais mot de passe, il ne faut pas dire :
ğŸš« **"Ce mot de passe ne correspond pas Ã  Paul123"**

Sinon, quelquâ€™un pourrait deviner des infos secrÃ¨tes.

Le problÃ¨me ? ğŸ¤” Ã‡a donne trop dâ€™infos Ã  un pirate qui pourrait deviner le bon mot de passe ğŸ”“.

FastAPI peut **cacher les dÃ©tails** dans les messages dâ€™erreur.
Câ€™est comme un magasin de jouets ğŸ qui ne dit pas combien de consoles il lui reste, pour Ã©viter les voleurs.

---

### ğŸ›  Comment Ã§a marche dans une appli ?

Dans une appli de livraison de repas ğŸ•, un client oublie son adresse.

- **Sans protection** : lâ€™appli montre un message trÃ¨s prÃ©cis :
  ğŸš« **"Erreur : Adresse manquante dans `delivery_address`"**

- **Avec un message sÃ©curisÃ©** : on peut juste dire :
  âœ… **"Erreur : Informations manquantes dans votre commande."**

Comme Ã§a, on ne montre pas **comment lâ€™appli fonctionne** Ã  ceux qui voudraient tricher.

---

### ğŸ¯ Personnaliser les erreurs avec FastAPI

Avec FastAPI, on peut **repÃ©rer les erreurs** et aussi **choisir le message** quâ€™on veut montrer.

âœ”ï¸ **On peut cacher les dÃ©tails techniques** pour que personne ne comprenne comment lâ€™appli marche.
âœ”ï¸ **Les messages sont plus simples** pour les utilisateurs.
âœ”ï¸ **Câ€™est une protection en plus ğŸ”**, comme un bouclier contre les personnes malveillantes.

En rÃ©sumÃ©, **cacher les messages dâ€™erreur**, câ€™est comme garder **le plan secret** dâ€™un jeu vidÃ©o ğŸ® pour Ã©viter que des tricheurs cassent les rÃ¨gles ! ğŸš€

#6

### ğŸš€ Ce que tu as appris jusquâ€™ici

Tu as vu comment **FastAPI** repÃ¨re les erreurs quand quelquâ€™un envoie de mauvaises infos.
Câ€™est comme un prof ğŸ“„âœ… qui vÃ©rifie ton contrÃ´le avant de le corriger.

Mais une appli ne fait pas que repÃ©rer les erreurs ! Elle doit aussi **stocker et ranger** toutes ses infos ğŸ“¦.

Dans le **prochain chapitre**, tu vas apprendre Ã  **gÃ©rer les donnÃ©es** dâ€™une appli web :
1ï¸âƒ£ **Comment enregistrer et retrouver les infos facilement**
2ï¸âƒ£ **Comment utiliser des bases SQL et NoSQL** (des gros classeurs numÃ©riques ğŸ“Š)
3ï¸âƒ£ **Comment protÃ©ger les donnÃ©es contre les voleurs ou les tricheurs ğŸ”’**

---

### ğŸ“¦ Pourquoi gÃ©rer les donnÃ©es est important ?

Dans une appli de **devoirs scolaires ğŸ“š**, il faut :
âœ… **Enregistrer** un devoir (ex : "Exercice de maths pour lundi")
âœ… **Retrouver la liste** quand lâ€™Ã©lÃ¨ve revient
âœ… **Bien ranger et protÃ©ger** les infos pour que personne ne les efface ou les change

Si lâ€™appli gÃ¨re mal les donnÃ©es, il peut y avoir des bugs ğŸ› :

âŒ Des devoirs qui disparaissent
âŒ Des devoirs mÃ©langÃ©s entre Ã©lÃ¨ves
âŒ Un Ã©lÃ¨ve qui peut tout effacer ğŸ˜¨

Donc, **bien ranger et protÃ©ger les donnÃ©es**, câ€™est super important !

---

### ğŸ›  SQL et NoSQL : deux faÃ§ons de ranger les donnÃ©es

ğŸ“‘ **SQL** â†’ Câ€™est comme un **tableau Excel** avec des lignes et des colonnes.
Parfait pour tout ce qui doit Ãªtre bien rangÃ©, comme une **bibliothÃ¨que ğŸ“–**.

ğŸ“¦ **NoSQL** â†’ Câ€™est comme une **grosse boÃ®te de dossiers**, oÃ¹ les infos peuvent changer de forme.
TrÃ¨s pratique pour des applis avec plein de donnÃ©es diffÃ©rentes, comme un **rÃ©seau social ğŸ“±**.

---

### ğŸ”’ La sÃ©curitÃ© des donnÃ©es, câ€™est super important !

Si une appli garde des infos comme des **messages ğŸ’¬**, des **scores ğŸ®** ou des **photos ğŸ“¸**, il faut :
âœ”ï¸ **EmpÃªcher les voleurs de les prendre**
âœ”ï¸ **Laisser seulement les bons utilisateurs y accÃ©der**
âœ”ï¸ **Ã‰viter que tout soit perdu ou changÃ© par erreur**

Câ€™est comme un **coffre-fort dans une banque ğŸ¦** : seules les bonnes personnes peuvent lâ€™ouvrir, et les autres doivent rester dehors !

---

### ğŸ¯ Pourquoi câ€™est important dâ€™apprendre Ã§a ?

Ã‡a te permet de :
âœ”ï¸ **CrÃ©er des applis solides et bien rangÃ©es**
âœ”ï¸ **Ã‰viter les bugs oÃ¹ les infos se perdent**
âœ”ï¸ **ProtÃ©ger les donnÃ©es des utilisateurs contre les voleurs**

Câ€™est comme **passer du bricolage ğŸ› ï¸ Ã  la construction dâ€™un immeuble ğŸ¢** : tu vas apprendre Ã  faire des applis qui grandissent sans bug mÃªme avec plein dâ€™utilisateurs ! ğŸš€
