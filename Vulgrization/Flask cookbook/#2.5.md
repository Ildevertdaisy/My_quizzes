
#1
Dâ€™accord ğŸ˜Š ! Voici une explication trÃ¨s simple, Ã©tape par Ã©tape, du petit bout de code Python quâ€™on a trouvÃ© dans un projet qui utilise **Flask**. On va imaginer quâ€™on veut construire une **application** (comme une appli de liste de courses ğŸ›’, ou une appli pour classer ses jeux vidÃ©o ğŸ® ou ses livres prÃ©fÃ©rÃ©s ğŸ“š), et quâ€™on veut rendre les choses jolies et bien prÃ©sentÃ©es Ã  lâ€™intÃ©rieur.

---

## ğŸ”§ **De quoi on parle ?**

On va parler de **Flask**, qui est comme une **boÃ®te Ã  outils magique pour construire des sites web** ğŸ§°. Par exemple, si tu veux crÃ©er un site qui montre ta collection de jeux vidÃ©o ou tes recettes de cuisine ğŸ³, Flask peut tâ€™aider Ã  construire les pages que les gens vont voir dans leur navigateur (comme Chrome, Firefox, etc.).

Ici, on apprend Ã  fabriquer **un petit outil personnalisÃ© dans Flask**, quâ€™on appelle un **filtre Jinja**. Et on va voir **Ã  quoi Ã§a sert**, **comment on le fabrique**, et **pourquoi on lâ€™utilise**.

---

## ğŸ§  **Mais câ€™est quoi un â€œfiltre Jinjaâ€ ?**

Un **filtre** dans Jinja (Jinja est le nom de lâ€™outil que Flask utilise pour faire des pages web jolies) sert Ã  **changer la maniÃ¨re dont les choses sâ€™affichent** Ã  lâ€™Ã©cran.

Par exemple :
- Tu veux que â€œMarioâ€ dans la catÃ©gorie â€œJeu VidÃ©oâ€ sâ€™affiche comme :  
  ğŸ‘‰ **Jeu VidÃ©o / Mario**  
  Alors le filtre peut faire Ã§a tout seul, sans que tu rÃ©Ã©crives le mÃªme code partout.

Câ€™est comme si tu construisais un **tampon magique** ğŸ§™â€â™‚ï¸ qui transforme une Ã©tiquette â€œtoute simpleâ€ en quelque chose de plus beau et complet.

---

## ğŸ‘¨â€ğŸ³ **Le code expliquÃ© comme une recette de cuisine**

Voici le code complet quâ€™on veut expliquer :

```python
@product_blueprint.app_template_filter('full_name')
def full_name_filter(product):
    return '{0} / {1}'.format(product['category'], product['name'])
```

Regardons chaque partie **comme si câ€™Ã©tait un jeu de LEGO ğŸ§±**, brique par brique !

---

### ğŸ§© `@product_blueprint.app_template_filter('full_name')`

- Le `@` ici est comme une **Ã©tiquette autocollante** ğŸ“ que tu colles sur une fonction pour dire Ã  Flask :  
  ğŸ‘‰ â€œHÃ© ! Cette fonction est spÃ©ciale, câ€™est un **filtre** que je veux utiliser dans mes pages web.â€

- `product_blueprint` :  
  Câ€™est comme un **petit morceau dâ€™un gros site**. Imaginons que ton site a une partie pour les jeux, une autre pour les livres, une autre pour les musiquesâ€¦ Chacune peut Ãªtre un **blueprint** (câ€™est un mot qui veut dire â€œplanâ€ ğŸ—ºï¸, comme un plan de construction).

- `.app_template_filter('full_name')` :  
  Tu dis ici que le filtre que tu crÃ©es va sâ€™appeler **`full_name`**.  
  Donc, dans ta page web, tu pourras Ã©crire un truc comme :  
  `{{ produit|full_name }}`  
  Ce qui veut dire : â€œPrends cet objet â€˜produitâ€™ et applique-lui le filtre `full_name`â€.

---

### ğŸ§© `def full_name_filter(product):`

- `def` :  
  Câ€™est le mot magique pour **dire quâ€™on crÃ©e une fonction**. Une fonction, câ€™est **une petite machine qui fait quelque chose** quand tu lui donnes un objet. Ici, on crÃ©e une fonction qui sâ€™appelle `full_name_filter`.

- `product` :  
  Câ€™est le **nom du truc quâ€™on lui donne**. Ce sera, par exemple, un dictionnaire (une sorte de boÃ®te contenant des infos, comme â€œcatÃ©gorie : Jeu VidÃ©oâ€ et â€œnom : Marioâ€).

---

### ğŸ§© `return '{0} / {1}'.format(product['category'], product['name'])`

- `return` :  
  Câ€™est comme **donner une rÃ©ponse** Ã  la question : â€œQuâ€™est-ce que cette fonction fabrique ?â€  
  Ici, on retourne une **phrase construite Ã  partir des infos du produit**.

- `'{0} / {1}'.format(...)` :  
  Câ€™est une faÃ§on dâ€™**assembler du texte automatiquement**.  
  - `{0}` est remplacÃ© par la **catÃ©gorie** du produit  
  - `{1}` est remplacÃ© par le **nom** du produit  
  â¡ï¸ Par exemple, si le produit a :
    - catÃ©gorie : "Instrument"
    - nom : "Guitare"
    
  Alors le rÃ©sultat sera : `"Instrument / Guitare"` ğŸ¸

- `product['category']` :  
  Câ€™est comme dire : â€œVa dans la boÃ®te `product` et prends lâ€™Ã©tiquette `category`â€.

- `product['name']` :  
  Pareil : â€œVa chercher lâ€™Ã©tiquette `name`â€.

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© pour enfants curieux ğŸ§’

Imagine que tu fais une **appli qui affiche des objets** (comme des jeux, des instruments de musique, des livres, des recettes, etc.) et tu veux que chaque objet ait **un nom bien prÃ©sentÃ©**.

Tu crÃ©es donc un **filtre magique** dans ton site avec Flask, qui transforme chaque objet comme Ã§a :
> catÃ©gorie + " / " + nom

Tu peux alors utiliser ce filtre partout dans tes pages web pour ne pas rÃ©Ã©crire le mÃªme truc.

---

## ğŸ§  Petit rappel de ce que fait chaque morceau

| Ã‰lÃ©ment | Ce que Ã§a veut dire (version simple) |
|--------|----------------------------------------|
| `@...app_template_filter('full_name')` | Donne un nom Ã  ton filtre pour lâ€™utiliser dans les pages web |
| `def full_name_filter(product):` | CrÃ©e une machine qui fabrique un texte Ã  partir dâ€™un objet |
| `return '{0} / {1}'.format(...)` | Assemble les morceaux de texte pour former un nom complet |

---

Et voilÃ  ! ğŸ‰ Maintenant, mÃªme si tu nâ€™as jamais codÃ©, tu comprends que ce petit bout de code est lÃ  pour **fabriquer un joli nom Ã  partir de deux infos** : la catÃ©gorie et le nom dâ€™un produit.

Tu pourrais lâ€™utiliser dans :
- Une appli de recettes ğŸ²
- Une appli de films ğŸ¬
- Une appli de tÃ¢ches Ã  faire âœ…
- Une appli dâ€™animaux prÃ©fÃ©rÃ©s ğŸ¶ğŸ±
- Ou mÃªme une appli de super-hÃ©ros ğŸ¦¸â€â™€ï¸ğŸ¦¸

Et tout Ã§a, grÃ¢ce Ã  un petit filtre ! âœ¨

Tu veux que je continue avec un autre extrait ?
        


#2
Bien sÃ»r ğŸ˜Š ! On continue l'explication trÃ¨s simple de notre petit projet avec **Flask**, qui sert Ã  faire des applications web (comme des sites ou des applis quâ€™on ouvre dans un navigateur). Jusquâ€™ici, on avait appris Ã  crÃ©er un **filtre magique** ğŸ”® appelÃ© `full_name` pour afficher joliment le nom dâ€™un objet, comme par exemple un produit ou un jeu ğŸ® ou un outil de bricolage ğŸ”¨.

Maintenant, on va apprendre **comment on utilise ce filtre dans les pages**, et ensuite on va **parler dâ€™un autre niveau de magie** : **formater lâ€™argent** avec une **bibliothÃ¨que spÃ©ciale**.

---

## ğŸ–¥ï¸ Comment utiliser le filtre `full_name` dans une page ?

Voici le petit bout de code qui est montrÃ© :

```jinja
{{ product|full_name }}
```

Câ€™est ce quâ€™on Ã©crit **dans le fichier qui crÃ©e la page web** (ce fichier est souvent fait avec Jinja, une sorte de langage pour fabriquer des pages HTML avec du contenu qui change).

---

### ğŸ§© DÃ©composons ce quâ€™il se passe ici :

- `{{ ... }}` :  
  Ce sont **des crochets spÃ©ciaux** utilisÃ©s dans les fichiers de page pour **montrer quelque chose Ã  lâ€™Ã©cran**.  
  Câ€™est comme dire : â€œDans cet endroit de la page, affiche ce que je te donne iciâ€.

- `product` :  
  Câ€™est **lâ€™objet** (ou â€œle trucâ€) quâ€™on veut afficher.  
  Par exemple, Ã§a pourrait Ãªtre une **fiche de jeu vidÃ©o** avec :
  - `category` = "Jeu VidÃ©o"
  - `name` = "Minecraft"

- `|full_name` :  
  Câ€™est ici quâ€™on **ajoute notre filtre magique** ğŸ”®.  
  Le **symbole `|`** (le petit tuyau vertical) veut dire : â€œfais passer ce produit dans le filtre `full_name`â€.

ğŸª„ RÃ©sultat : au lieu de voir juste "Minecraft", la page affichera :  
ğŸ‘‰ **"Jeu VidÃ©o / Minecraft"**

---

### ğŸ² Dans quelles applis on pourrait utiliser Ã§a ?

Tu pourrais utiliser cette astuce dans plein dâ€™applications :
- Une appli de recettes de cuisine ğŸ• (catÃ©gorie = "Dessert", nom = "CrÃªpe au chocolat" â†’ affiche "Dessert / CrÃªpe au chocolat")
- Une appli de bibliothÃ¨que ğŸ“š (catÃ©gorie = "Roman", nom = "Harry Potter")
- Une appli de musique ğŸµ (catÃ©gorie = "Pop", nom = "Let it be")
- Une appli de magasin ğŸ›ï¸ (catÃ©gorie = "VÃªtements", nom = "T-shirt rouge")
- Une appli pour ranger des outils ğŸ§° (catÃ©gorie = "Ã‰lectricitÃ©", nom = "Tournevis")

---

## ğŸ’¸ Et maintenantâ€¦ on passe au niveau supÃ©rieur !

La suite du texte nous dit quâ€™on va **aller plus loin** (ğŸš€), en utilisant des **bibliothÃ¨ques externes** pour **formater de lâ€™argent** (comme afficher joliment un prix, par exemple : `12.5` devient **12,50 â‚¬** ou **$12.50**).

---

### ğŸ“š Mais câ€™est quoi une â€œbibliothÃ¨que externeâ€ ?

Une **bibliothÃ¨que**, en informatique, câ€™est comme **une boÃ®te pleine dâ€™outils prÃªts Ã  lâ€™emploi** ğŸ§°.

- **Externe** veut dire que ce nâ€™est **pas dans Python directement**. Câ€™est quelque chose quâ€™on ajoute de lâ€™extÃ©rieur (comme une appli quâ€™on tÃ©lÃ©charge).

ğŸ‘‰ Exemple :  
Tu veux afficher de lâ€™argent proprement (comme dans un site de magasin), mais Python de base ne sait pas trop bien faire Ã§a.  
Alors tu **importes** (câ€™est comme emprunter) une **bibliothÃ¨que spÃ©ciale** qui sait le faire.

---

## ğŸ§  RÃ©sumÃ© pour les petits curieux

- On a appris Ã  utiliser un **filtre personnalisÃ©** dans une page avec `{{ produit|full_name }}` pour **afficher un nom complet** joliment.
- Ensuite, on se prÃ©pare Ã  utiliser des **boÃ®tes Ã  outils extÃ©rieures** (quâ€™on appelle **bibliothÃ¨ques externes**) pour **afficher des prix en euros, en dollars, etc.** de faÃ§on plus lisible et propre ğŸ’µğŸ’¶.

---

Si tu veux, on peut continuer la suite quand tu es prÃªt.e ğŸ˜‰ Tu veux que je tâ€™explique la prochaine partie sur le formatage des prix avec la bibliothÃ¨que ?

        

#3
Parfait ğŸ˜„ ! On continue notre petit voyage dans le monde de **Flask** (le mini-outil pour crÃ©er des sites web ou des applis) et cette fois-ci, on apprend Ã  crÃ©er un **filtre magique pour afficher de lâ€™argent proprement**, en tenant compte de **la langue ou du pays** de la personne qui utilise notre appli.

Par exemple, si quelquâ€™un vient de France, on veut afficher des prix comme Ã§a :  
ğŸ’¶ **EUR 25**

Mais si quelquâ€™un vient du Japon, on veut plutÃ´t :  
ğŸ’´ **JPY 25**

Câ€™est comme si on voulait que notre appli parle la **langue de chacun** et **montre la bonne monnaie** toute seule, comme un assistant intelligent ğŸ§ ğŸ’°.

---

## ğŸ§™â€â™‚ï¸ Le code magique

Voici le **code complet** qui est montrÃ© dans le texte :

```python
import ccy
from flask import request

@app.template_filter('format_currency')
def format_currency_filter(amount):
    currency_code = ccy.countryccy(request.accept_languages.best[-2:])
    return '{0} {1}'.format(currency_code, amount)
```

Maintenant, on va **dÃ©cortiquer tout Ã§a en langage trÃ¨s simple**, avec des images, des mÃ©taphores et des exemples de la vie de tous les jours ğŸª„.

---

## ğŸ§© Ligne 1 : `import ccy`

- **`import`** :  
  Ce mot-clÃ© veut dire **â€œje veux utiliser une boÃ®te Ã  outils spÃ©cialeâ€**.  
  Câ€™est comme prendre une boÃ®te de LEGO dans lâ€™armoire pour construire quelque chose ğŸ§±.

- **`ccy`** :  
  Câ€™est le nom de la bibliothÃ¨que. Elle **connaÃ®t toutes les monnaies du monde** ğŸŒğŸ’¸.  
  Par exemple :
  - Pour â€œFranceâ€, elle sait que câ€™est â€œEURâ€
  - Pour â€œÃ‰tats-Unisâ€, câ€™est â€œUSDâ€
  - Pour â€œJaponâ€, câ€™est â€œJPYâ€

---

## ğŸ§© Ligne 2 : `from flask import request`

- **`from flask import request`** :  
  Ici, on **importe un autre outil** de Flask, qui sâ€™appelle **`request`**.

  Le mot **`request`** (Ã§a veut dire "demande") reprÃ©sente **les infos envoyÃ©es par lâ€™utilisateur** quand il visite notre site.

  Exemple : si quelquâ€™un ouvre notre site depuis une tablette en Espagne, `request` peut nous dire :
  - â€œLa langue prÃ©fÃ©rÃ©e de la personne est : espagnolâ€
  - â€œLa rÃ©gion est peut-Ãªtre lâ€™Espagneâ€

Câ€™est un peu comme **lire la carte dâ€™identitÃ© de quelquâ€™un**, mais juste ce quâ€™il nous permet de voir pour mieux lâ€™aider ğŸªª.

---

## ğŸ§© Ligne 3 : `@app.template_filter('format_currency')`

- Le `@` veut dire encore une fois : â€œVoici un **filtre magique spÃ©cial** pour les pages webâ€.

- `app.template_filter('format_currency')` :  
  On donne un **nom** Ã  ce filtre : **`format_currency`**.

  Cela veut dire quâ€™on pourra Ã©crire dans nos pages :  
  ğŸ‘‰ `{{ montant|format_currency }}`  
  pour formater joliment un nombre comme **"150"** en **"USD 150"** ou **"EUR 150"** selon le pays.

---

## ğŸ§© Ligne 4 : `def format_currency_filter(amount):`

- **`def`** : câ€™est le mot pour dire **â€œje crÃ©e une fonctionâ€** (une petite machine qui fait un travail prÃ©cis).

- `format_currency_filter` : câ€™est le nom de la fonction.

- `(amount)` :  
  Cela veut dire quâ€™on va **donner Ã  cette fonction un nombre** (comme 25 ou 19.99), qui reprÃ©sente **une somme dâ€™argent**.

---

## ğŸ§© Ligne 5 : `currency_code = ccy.countryccy(request.accept_languages.best[-2:])`

Câ€™est la ligne la plus magique âœ¨, alors on va **la dÃ©couper en plusieurs morceaux** :

- **`request.accept_languages`** :  
  Câ€™est une **liste des langues prÃ©fÃ©rÃ©es** de la personne qui visite le site.  
  Par exemple, si lâ€™utilisateur parle anglais et franÃ§ais, on peut voir un truc comme :  
  `['en', 'fr']`

- **`.best`** :  
  Ã‡a essaie de trouver **la langue prÃ©fÃ©rÃ©e** en haut de la liste.

- **`[-2:]`** :  
  Cette partie demande les **2 derniÃ¨res lettres** (comme `'fr'` ou `'en'`) pour deviner le **code du pays**.

- **`ccy.countryccy(...)`** :  
  Cette fonction va **traduire le code du pays en code de monnaie**.

  Par exemple :
  - `'fr'` â†’ `'EUR'`
  - `'us'` â†’ `'USD'`

Donc en rÃ©sumÃ©, cette ligne cherche :
ğŸ‘‰ *â€œDâ€™oÃ¹ vient la personne ?â€* â†’ *â€œQuelle est la monnaie de lÃ -bas ?â€*

Et on stocke cette rÃ©ponse dans une **variable** appelÃ©e `currency_code`, comme une petite boÃ®te oÃ¹ on range ce quâ€™on a trouvÃ©.

---

## ğŸ§© Ligne 6 : `return '{0} {1}'.format(currency_code, amount)`

- **`return`** :  
  Cela veut dire : â€œvoici le rÃ©sultat final de ma petite machineâ€.

- **`'{0} {1}'.format(...)`** :  
  Câ€™est une faÃ§on de **coller ensemble** deux morceaux de texte :
  - `{0}` â†’ le code de la monnaie (comme `USD`)
  - `{1}` â†’ le montant donnÃ© (comme `25`)

ğŸª„ RÃ©sultat final affichÃ© Ã  lâ€™Ã©cran :
> `USD 25`  
> `EUR 50.99`  
> ou mÃªme `JPY 1000`

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© simple comme un jeu

1. On a crÃ©Ã© un **filtre magique** appelÃ© `format_currency`.
2. Il sert Ã  **afficher une somme dâ€™argent joliment**, avec la bonne monnaie selon le pays.
3. On utilise une **bibliothÃ¨que externe** (ccy) pour savoir **quelle monnaie utiliser**.
4. Et on peut lâ€™utiliser dans nos pages comme Ã§a :  
ğŸ‘‰ `{{ 25|format_currency }}`  
Et Ã§a affichera automatiquement **â€œUSD 25â€** ou **â€œEUR 25â€**, selon lâ€™utilisateur ğŸŒâœ¨

---

## ğŸ® OÃ¹ est-ce quâ€™on pourrait utiliser Ã§a ?

- Dans une appli pour vendre des jouets ğŸ§¸
- Dans une appli de location de vÃ©los ğŸš²
- Dans un site de rÃ©servation de films ğŸ¥
- Dans une appli pour acheter des jeux vidÃ©o ğŸ®
- Dans une appli pour commander des pizzas ğŸ•

Et Ã§a Ã©vite dâ€™Ã©crire â€œEuroâ€ ou â€œDollarâ€ Ã  la main chaque fois !

---

Tu veux quâ€™on continue avec le prochain bout du texte ? ğŸ˜Š
        


#4
Dâ€™accord ğŸ˜Š ! On va maintenant parler dâ€™un **petit dÃ©tail trÃ¨s important** quand on utilise notre filtre magique pour afficher des monnaies (comme on lâ€™a vu juste avant ğŸ’¶ğŸ’µ).

---

## ğŸ§  Une prÃ©cision importante

On apprend ici quâ€™**il y a un cas oÃ¹ notre filtre pourrait ne pas fonctionner** comme prÃ©vu. Et cette prÃ©cision est super utile, un peu comme une **pancarte "attention"** ğŸª§ quand on marche quelque part.

---

### ğŸ§© Ce que dit la phrase

Elle dit que :

> `request.accept_languages` **peut ne pas marcher** dans certains cas, surtout **quand la requÃªte (le message du visiteur)** **ne contient pas lâ€™en-tÃªte appelÃ© ACCEPT-LANGUAGES**.

ğŸ˜® Oulah, Ã§a fait beaucoup de mots compliquÃ©s ? Pas de panique ! On va tout expliquer mot par mot ğŸ‘‡

---

## âœ‰ï¸ Câ€™est quoi une â€œrequÃªteâ€ (ou *request*) ?

Quand une personne **ouvre ton site ou ton appli**, son tÃ©lÃ©phone ou son ordinateur envoie une **demande**. En langage informatique, on appelle Ã§a une **requÃªte** (ou en anglais : *request*).

Câ€™est comme quand tu vas au comptoir dâ€™une boulangerie et que tu dis :  
ğŸ‘‰ â€œBonjour, je voudrais une baguette sâ€™il vous plaÃ®t ğŸ¥– !â€

Ici, lâ€™ordinateur dit :  
ğŸ‘‰ â€œBonjour site web, peux-tu me montrer la page dâ€™accueil ?â€

---

## ğŸ·ï¸ Et lâ€™en-tÃªte ACCEPT-LANGUAGES, câ€™est quoi ?

Cette requÃªte (cette demande) contient souvent **des petits papiers avec des infos** quâ€™on appelle des **en-tÃªtes** (headers). Ce sont comme **des post-it attachÃ©s Ã  la demande**, pour donner des prÃ©cisions.

Lâ€™en-tÃªte qui sâ€™appelle **ACCEPT-LANGUAGES** (ce qui veut dire â€œLangues acceptÃ©esâ€) dit au site :

ğŸ‘‰ â€œJe parle franÃ§aisâ€ ou â€œJe prÃ©fÃ¨re lâ€™anglaisâ€ ou â€œJe suis en Espagne, donc parle-moi en espagnolâ€.

Câ€™est grÃ¢ce Ã  Ã§a que notre filtre magique peut deviner la **monnaie** Ã  utiliser :  
ğŸ‡«ğŸ‡· â†’ EUR  
ğŸ‡ºğŸ‡¸ â†’ USD  
ğŸ‡¯ğŸ‡µ â†’ JPY

---

## ğŸ˜• Mais sâ€™il nâ€™y a pas ce post-it ?

Si la personne qui envoie la demande **nâ€™a pas mis ce post-it ACCEPT-LANGUAGES**, alors Flask (notre outil) ne saura **pas quelle langue** la personne prÃ©fÃ¨re. Donc...

ğŸ˜” ğŸ‘‰ notre filtre ne pourra pas savoir **quelle monnaie utiliser**.

---

## ğŸ§¸ Exemple concret pour les petits

Imaginons une appli pour acheter des jouets en ligne ğŸ§¸. Quelquâ€™un veut acheter une peluche depuis le Canada ğŸ‡¨ğŸ‡¦.

Sâ€™il envoie une **requÃªte avec ACCEPT-LANGUAGES = 'en-CA'** (anglais du Canada), alors lâ€™appli va dire :
> â€œAh super, je vais afficher les prix en **CAD (dollars canadiens)** ğŸ’µ !â€

Mais sâ€™il **nâ€™envoie rien du tout**, alors lâ€™appli est un peu perdue ğŸ˜µ :
> â€œEuhâ€¦ je sais pas trop dâ€™oÃ¹ tu viens, donc je ne sais pas quelle monnaie utiliser...â€

---

## ğŸ“± Et Ã§a arrive dans quels cas ?

Ã‡a peut arriver dans certaines situations :
- Si une machine ou un robot informatique fait la demande (et pas un vrai navigateur)
- Si le tÃ©lÃ©phone de la personne **ne dit pas sa langue**
- Si câ€™est une application trÃ¨s simple qui **nâ€™envoie pas toutes les infos** normalement

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© super simple :

> ğŸ›‘ **Si la requÃªte ne dit pas la langue prÃ©fÃ©rÃ©e, le filtre `format_currency` ne saura pas quelle monnaie afficher.**

Donc câ€™est important de **prÃ©voir ce cas spÃ©cial** quand on crÃ©e une vraie application, comme :
- Une appli de courses ğŸ›’
- Une appli de rÃ©servation dâ€™hÃ´tel ğŸ¨
- Une appli de billetterie pour le cinÃ©ma ğŸŸï¸
- Une appli pour vendre des plantes ğŸŒ±

Parce que dans ces applis, **afficher le bon prix dans la bonne monnaie**, câ€™est super important !

---

Tu veux quâ€™on continue avec la prochaine partie ? ğŸ˜Š



#5
Parfait ğŸ˜Š ! Cette partie nous donne une **Ã©tape pratique trÃ¨s importante** pour que le petit morceau de code dont on a parlÃ© avant puisse vraiment fonctionner.

---

## ğŸ§° Ce quâ€™on apprend ici

On nous dit que pour utiliser la magie de la monnaie (avec le filtre quâ€™on a vu), on a besoin **dâ€™une boÃ®te spÃ©ciale quâ€™on appelle un "package"** (ou â€œpaquetâ€).

Et cette boÃ®te sâ€™appelle **`ccy`**.

---

## ğŸ“¦ Câ€™est quoi un â€œpackageâ€ (ou paquet) ?

Un **package**, câ€™est comme une **valise pleine dâ€™outils dÃ©jÃ  prÃªts** ğŸ§³.

Par exemple :
- Si tu fais une appli de recettes ğŸ³, tu peux utiliser un package pour convertir des grammes en cuillÃ¨res.
- Si tu fais une appli de traduction ğŸŒ, tu peux utiliser un package pour traduire automatiquement des mots.
- Si tu fais une appli pour calculer le prix total dâ€™un panier ğŸ›’, tu peux utiliser un package pour ajouter les bonnes taxes selon le pays.

Ici, notre filtre magique a besoin dâ€™un package spÃ©cial qui sâ€™appelle **`ccy`**, qui **connaÃ®t toutes les monnaies du monde** ğŸ’±.

---

## ğŸ§© La commande spÃ©ciale : `$ pip install ccy`

On voit une **ligne avec un dollar au dÃ©but** :

```
$ pip install ccy
```

Voyons ce que Ã§a veut dire en version ultra simple :

- **`$`** :  
  Ce signe nous dit que câ€™est **une commande quâ€™on tape dans le terminal** (le terminal, câ€™est un Ã©cran noir oÃ¹ on parle avec lâ€™ordinateur en tapant des mots au lieu de cliquer ğŸ–¥ï¸âŒ¨ï¸).

- **`pip`** :  
  Câ€™est un **petit assistant** qui sait **aller chercher et installer des packages**.  
  On peut imaginer que `pip`, câ€™est comme un livreur ğŸ›µ qui va chercher la boÃ®te quâ€™on veut et la met dans notre projet.

- **`install`** :  
  Ce mot dit Ã  pip : â€œVa chercher la boÃ®te et **installe-la** chez moi, je veux mâ€™en servir.â€

- **`ccy`** :  
  Câ€™est le **nom de la boÃ®te** quâ€™on veut. Cette boÃ®te sait **quelles monnaies sont utilisÃ©es dans chaque pays** ğŸŒğŸ’°.

---

## ğŸ¯ Pourquoi il faut installer Ã§a ?

Parce que **Python tout seul ne connaÃ®t pas toutes les monnaies**.  
Donc, quand on veut afficher des prix avec la bonne monnaie dans :
- une appli de rÃ©servation de trains ğŸš†,
- une appli de commandes de nourriture ğŸ”,
- une appli pour acheter des billets de concert ğŸ¤,
- ou mÃªme une appli de troc entre enfants ğŸ§¸ğŸ®,

il faut que notre programme ait un **outil spÃ©cial**, et cet outil est dans la boÃ®te **`ccy`**.

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© super simple

> Pour que notre code fonctionne et sache afficher les **bonnes monnaies selon le pays**, il faut **installer un paquet magique** qui sâ€™appelle `ccy`, grÃ¢ce Ã  un **petit assistant livreur** qui sâ€™appelle `pip` ğŸšš.

On tape donc la commande :
```
$ pip install ccy
```
et tout se met en place ğŸ‰

---

Tu veux quâ€™on continue avec la prochaine partie du texte ? ğŸ˜Š



#6

TrÃ¨s bien ğŸ˜„ ! On continue Ã  **expliquer simplement** comment fonctionne le filtre quâ€™on a fabriquÃ© tout Ã  lâ€™heure pour **afficher la bonne monnaie selon la langue du navigateur**.

Ici, on tâ€™explique **comment** le filtre devine quelle monnaie il doit utiliser (comme lâ€™euro ğŸ’¶, le dollar ğŸ’µ, ou le yen ğŸ’´), **en regardant la langue du navigateur** de la personne qui utilise ton site.

---

## ğŸŒ Comment le filtre sait quoi faire ?

Ce petit filtre magique fait trois choses simples, un peu comme un dÃ©tective ğŸ•µï¸â€â™‚ï¸ :

---

### ğŸ•µï¸â€â™‚ï¸ 1. Il regarde la langue du navigateur de lâ€™utilisateur

Quand quelquâ€™un ouvre une appli ou un site web, son navigateur (comme Chrome, Firefox, Safari...) **dit quelle langue il prÃ©fÃ¨re**.

Par exemple :
- Un navigateur en France dira : **"fr-FR"** (franÃ§ais - France)
- Un navigateur au Canada dira : **"en-CA"** (anglais - Canada)
- Un navigateur aux Ã‰tats-Unis dira : **"en-US"** (anglais - Ã‰tats-Unis)

Ce petit bout de texte est ce quâ€™on appelle une **locale** (Ã§a veut juste dire â€œlangue et pays combinÃ©sâ€).

---

### ğŸ”¤ 2. Il prend les **deux derniÃ¨res lettres** de cette locale

Ensuite, notre filtre prend **juste les deux derniÃ¨res lettres** de ce code.

Par exemple :
- Si la locale est **"en-US"**, il garde **"US"**
- Si câ€™est **"fr-FR"**, il garde **"FR"**
- Si câ€™est **"ja-JP"** (japonais - Japon), il garde **"JP"**

Pourquoi ? Parce que ces deux lettres sont **le code du pays**, dâ€™aprÃ¨s une rÃ¨gle appelÃ©e **ISO** (câ€™est une rÃ¨gle internationale que tout le monde suit pour que les ordinateurs parlent la mÃªme langue ğŸŒ).

---

### ğŸ’± 3. Il utilise ce code pour choisir la monnaie

Une fois quâ€™on a ce **code du pays**, notre filtre va chercher **la monnaie associÃ©e**.

- **"US"** â†’ **USD** (dollar amÃ©ricain ğŸ’µ)
- **"FR"** â†’ **EUR** (euro ğŸ’¶)
- **"JP"** â†’ **JPY** (yen japonais ğŸ’´)
- **"GB"** â†’ **GBP** (livre sterling ğŸ‡¬ğŸ‡§)

Et voilÃ  ! GrÃ¢ce Ã  Ã§a, ton site ou ton appli peut afficher :
- **"EUR 9.99"** si lâ€™utilisateur est en France
- **"USD 9.99"** sâ€™il est aux Ã‰tats-Unis
- **"JPY 999"** sâ€™il est au Japon

ğŸ¯ Sans que lâ€™utilisateur ait besoin de choisir quoi que ce soit !

---

## ğŸ“± OÃ¹ câ€™est utile dans la vraie vie ?

Voici des **exemples dâ€™applis** oÃ¹ ce systÃ¨me est super utile :

- Une appli pour acheter des jouets en ligne ğŸ§¸ : les prix doivent sâ€™afficher en monnaie locale pour chaque pays.
- Une appli pour rÃ©server des chambres dâ€™hÃ´tel ğŸ¨ : lâ€™utilisateur doit voir le prix dans sa monnaie.
- Une appli de gestion de dÃ©penses personnelles ğŸ’° : si tu voyages ou si tu vis Ã  lâ€™Ã©tranger, tu veux voir la bonne monnaie automatiquement.
- Une appli de livraison de nourriture ğŸ• : le prix doit Ãªtre clair et familier pour les gens.

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© tout simple

> Le filtre regarde la **langue du navigateur**, garde les **deux derniÃ¨res lettres** pour deviner **le pays**, et affiche **la monnaie du pays** ğŸ§ ğŸ’µ. Câ€™est comme un assistant qui reconnaÃ®t ton pays juste en entendant ta langue, et qui te montre **les bons prix au bon format**.

Tu veux que je continue avec la suite ? ğŸ˜Š



#7
Parfait ğŸ˜Š ! Cette fois, on apprend un petit **truc malin** (ğŸ§  *tip* = astuce) Ã  propos de notre filtre magique quâ€™on utilise dans Flask pour modifier comment les choses sâ€™affichent dans une page (comme les noms, les prix, etc.).

---

## ğŸ§© OÃ¹ peut-on mettre notre filtre magique dans un projet Flask ?

Dans un projet Flask, il y a **deux endroits diffÃ©rents** oÃ¹ on peut mettre un **filtre Jinja** (le filtre magique qui transforme du contenu avant de lâ€™afficher) :

### ğŸ§± 1. Au niveau du *blueprint*

Un **blueprint**, câ€™est comme une **petite partie dâ€™un site ou dâ€™une application**. Câ€™est une **brique** dâ€™un gros projet.

ğŸ’¡ Par exemple :
- Tu fais une appli pour une bibliothÃ¨que ğŸ“š : tu peux avoir un blueprint pour gÃ©rer les livres, un autre pour les membres, et un autre pour les prÃªts.
- Ou une appli de planning ğŸ“… : tu peux avoir un blueprint pour les tÃ¢ches, un autre pour les calendriers, et un autre pour les rappels.

Chaque blueprint peut avoir **ses propres filtres**, juste pour sa partie Ã  lui.

Quand tu mets le filtre **dans un blueprint**, tu dois utiliser une Ã©tiquette spÃ©ciale (appelÃ©e un **dÃ©corateur**) avec cette forme :  
ğŸ‘‰ `app_template_filter`

Câ€™est un mot spÃ©cial qui dit : **â€œce filtre appartient Ã  cette partie du site uniquementâ€**.

---

### ğŸŒ 2. Au niveau de toute lâ€™application (*application level*)

Si tu prÃ©fÃ¨res, tu peux aussi **mettre le filtre Ã  un endroit gÃ©nÃ©ral**, pour quâ€™il soit **disponible dans tout le projet**, dans toutes les pages et toutes les parties de ton appli.

ğŸ’¡ Par exemple :
- Dans une appli de recettes de cuisine ğŸ², tu veux un filtre pour afficher joliment les ingrÃ©dients. Et tu veux que ce filtre fonctionne **partout**, dans toutes les pages.
- Ou dans une appli de ventes de vÃªtements ğŸ‘•ğŸ‘—, tu veux un filtre qui formate les tailles, peu importe la page (produit, panier, profil...).

Dans ce cas-lÃ , tu utilises un autre mot pour le dÃ©corateur :  
ğŸ‘‰ `template_filter` (sans le mot `app_` devant)

Ce mot dit : **â€œce filtre est disponible pour tout le monde dans lâ€™appliâ€** ğŸ§™â€â™€ï¸âœ¨

---

## ğŸ§  RÃ©sumÃ© en langage trÃ¨s simple

> Un **filtre Jinja** (câ€™est un outil qui transforme des infos avant de les afficher dans la page) peut Ãªtre **mis dans une petite partie de ton site (un blueprint)** ou **dans tout ton projet (lâ€™application complÃ¨te)**.

Et selon lâ€™endroit oÃ¹ tu le mets, **tu utilises un nom diffÃ©rent** pour que Flask comprenne :
- `app_template_filter` â¡ï¸ pour une **partie prÃ©cise** du site/app
- `template_filter` â¡ï¸ pour **toute lâ€™application**

---

## ğŸ® Dans quelles applis câ€™est utile ?

- Dans un **jeu en ligne** avec plusieurs zones (profil du joueur, boutique, classement ğŸ†), chaque zone peut avoir ses propres filtres.
- Dans une **appli de santÃ©** ğŸ¥ (rendez-vous, ordonnances, analyses), tu peux mettre des filtres diffÃ©rents dans chaque section.
- Dans une **appli de voyage** ğŸ§³ (rÃ©servations, destinations, mÃ©tÃ©o), tu peux personnaliser les filtres pour chaque Ã©cran.

Câ€™est comme si tu dÃ©cidais si une **rÃ¨gle sâ€™applique juste dans ta chambre**, ou **dans toute la maison** ğŸ ğŸ˜‰

---

Tu veux quâ€™on continue avec la suite ? ğŸ˜Š



#8
Super ğŸ˜Š ! On continue lâ€™aventure avec Flask et maintenant on apprend **comment utiliser notre filtre magique pour afficher un prix joliment** dans une page dâ€™un site ou dâ€™une application. On va voir **comment ce filtre est utilisÃ© dans un modÃ¨le de page web** (ce quâ€™on appelle un *template*).

Et comme toujours, on va **tout expliquer pas Ã  pas**, avec des images simples et des exemples concrets du monde rÃ©el ğŸ¯.

---

## ğŸ§¾ Voici le code complet quâ€™on veut expliquer :

```html
<h3>{{ product['price']|format_currency }}</h3>
```

---

### ğŸ§© On dÃ©code chaque morceau du code comme un puzzle

---

### ğŸ§± `<h3> ... </h3>`

- Les **balises `<h3>`** sont utilisÃ©es dans le langage HTML (le langage qui sert Ã  fabriquer les pages web).  
  Ici, **`<h3>` veut dire â€œtitre de niveau 3â€**, un peu comme un sous-titre dans un livre ğŸ“˜.

ğŸ‘‰ Par exemple, si tu fais une page avec :
- un gros titre pour â€œMa liste de jeuxâ€ â†’ `<h1>`
- un titre moyen pour chaque catÃ©gorie â†’ `<h2>`
- et un petit titre pour afficher le **prix dâ€™un produit** â†’ `<h3>`

Alors tu Ã©cris ce prix **entre** `<h3>` et `</h3>`.

---

### ğŸ§™â€â™‚ï¸ `{{ product['price']|format_currency }}`

Câ€™est la partie magique de Jinja, le langage que Flask utilise pour **afficher du contenu qui change selon les donnÃ©es**.

#### ğŸª„ `{{ ... }}`

- Les **double accolades** `{{ ... }}` veulent dire :
  ğŸ‘‰ â€œFlask, affiche quelque chose ici dans la pageâ€.

Câ€™est comme une **fenÃªtre dans la page** oÃ¹ on peut **montrer une info qui vient du programme**.

---

#### ğŸ“¦ `product['price']`

- Ici, on demande Ã  Flask :
  ğŸ‘‰ â€œVa chercher le prix (`price`) dans lâ€™objet `product`.â€

Un **produit** (product), câ€™est comme une fiche qui contient plusieurs infos :
- son nom (par exemple `"T-shirt rouge"`)
- sa catÃ©gorie (par exemple `"VÃªtements"`)
- son prix (par exemple `12.99`)

Et quand on Ã©crit `product['price']`, on dit :
ğŸ‘‰ â€œJe veux juste le prix de ce produit.â€

---

#### ğŸ§ª `|format_currency`

- Le **`|`** est ce quâ€™on appelle un **filtre** (comme un petit tuyau qui transforme ce quâ€™il reÃ§oit ğŸš¿).

- `format_currency` est le **filtre magique quâ€™on a fabriquÃ© tout Ã  lâ€™heure**, celui qui **prend un nombre (comme 12.99)** et le **transforme en prix avec une monnaie** selon le pays.

Par exemple :
- Si la personne est en Espagne, Ã§a va afficher : **"EUR 12.99"**
- Si elle est aux Ã‰tats-Unis : **"USD 12.99"**
- Si elle est au Japon : **"JPY 1299"**

---

### ğŸ¯ RÃ©sultat final dans une vraie appli

Imaginons que tu fabriques une application pour :

- ğŸ® vendre des jeux vidÃ©o
- ğŸ‘• afficher des habits Ã  vendre
- ğŸ° montrer le prix dâ€™un gÃ¢teau
- ğŸš´â€â™‚ï¸ louer des vÃ©los

Et tu veux que le prix **soit bien prÃ©sentÃ©** selon le pays de chaque visiteur.

Alors, dans ta page, tu Ã©cris :

```html
<h3>{{ product['price']|format_currency }}</h3>
```

Et Ã§a va faire apparaÃ®tre **automatiquement** le bon format de prix, par exemple :  
ğŸ’¶ **EUR 14.99**  
ğŸ’µ **USD 14.99**  
ğŸ’´ **JPY 1600**

Sans que tu aies besoin de deviner dâ€™oÃ¹ vient la personne ğŸŒ. Magique, non ? âœ¨

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© super simple :

> On a utilisÃ© **notre filtre magique** dans une page HTML pour **afficher le prix dâ€™un produit**.  
> Il prend le prix, regarde dans quel pays la personne se trouve, et **ajoute la bonne monnaie automatiquement** ğŸ§™â€â™‚ï¸ğŸ’°.

---

Tu veux quâ€™on continue avec la suite ? ğŸ˜Š
        


#9
Parfait ğŸ˜„ ! LÃ , on nous explique que **le code quâ€™on vient de voir juste avant** (celui oÃ¹ on utilisait le filtre magique `format_currency`) **va produire un rÃ©sultat visible dans la page web**, et que ce rÃ©sultat est **exactement ce quâ€™on voit dans lâ€™image** fournie.

Voyons donc ce que cela veut dire, en langage super simple, avec des images dans la tÃªte et des exemples concrets ğŸ§ ğŸ¨.

---

## ğŸ–¼ï¸ Ce quâ€™on voit dans lâ€™image (la capture dâ€™Ã©cran)

La page affiche ceci :

---

### ğŸ§¾ *Phones / iPhone 5S*

Cette ligne montre une **chemin de navigation**, câ€™est-Ã -dire une sorte de **piste pour dire oÃ¹ on est dans le site**.  
Un peu comme dans un magasin, si tu lis :
> "Ã‰lectronique > TÃ©lÃ©phones > iPhone 5S"

Ici :
- â€œPhonesâ€ veut dire que le produit fait partie de la catÃ©gorie **TÃ©lÃ©phones** ğŸ“±
- â€œiPhone 5Sâ€ est le **nom du produit**

---

### ğŸ“¢ *iPhone 5S*

Câ€™est le **nom du produit affichÃ© en gros** (en grand titre, trÃ¨s visible).

Quand on fait un site de produits, comme une boutique ou une appli de comparaison :
- on montre le **nom de ce quâ€™on regarde**, pour que lâ€™utilisateur sache tout de suite oÃ¹ il est.

---

### ğŸ—‚ï¸ *Phones*

Ici, on **rÃ©pÃ¨te la catÃ©gorie**. Cela peut servir Ã  afficher une **Ã©tiquette** ou un **tag** pour organiser les produits.

Par exemple :
- Si câ€™Ã©tait un jeu, Ã§a pourrait Ãªtre â€œJeux de rÃ©flexionâ€
- Si câ€™Ã©tait une chanson, Ã§a pourrait Ãªtre â€œPopâ€
- Si câ€™Ã©tait un plat, Ã§a pourrait Ãªtre â€œDessertâ€

---

### ğŸ’° *USD 699*

Et voici le cÅ“ur du sujet : **le prix** !  
Câ€™est le **rÃ©sultat du filtre `format_currency`** quâ€™on a appris Ã  utiliser.

Explication simple :
- â€œUSDâ€ veut dire **dollars amÃ©ricains**
- â€œ699â€ est le **prix**

Ce que fait notre filtre, câ€™est prendre **juste le nombre** (`699`) et **ajouter la monnaie** automatiquement, en regardant **dâ€™oÃ¹ vient lâ€™utilisateur** ou **quelle est sa langue**.

---

## ğŸ§‘â€ğŸ« RÃ©sumÃ© de ce quâ€™on a appris ici

> Le petit bout de code quâ€™on a utilisÃ© (avec `{{ product['price']|format_currency }}`) **crÃ©e exactement ce quâ€™on voit dans lâ€™image** :
> - Une page avec un nom de produit
> - Sa catÃ©gorie
> - Et un **prix bien affichÃ© avec la bonne monnaie** ğŸ’¸

---

## ğŸ§© OÃ¹ est-ce quâ€™on peut rÃ©utiliser Ã§a dans dâ€™autres applis ?

- Dans une **appli de location de maisons** ğŸ¡ : pour afficher les prix des locations selon les pays
- Dans une **appli de billetterie** ğŸ« : pour les concerts ou les matchs avec le bon tarif local
- Dans une **appli de livraison de repas** ğŸ• : pour que chaque utilisateur voie le bon prix selon son pays
- Dans une **appli pour vendre du matÃ©riel scolaire** âœï¸ğŸ“š : comme des trousses ou des sacs, avec la bonne monnaie selon lâ€™Ã©cole ou la ville

---

Et voilÃ  ğŸ˜Š ! Tout ce quâ€™on a codÃ© jusquâ€™Ã  maintenant **sâ€™affiche dans la page comme prÃ©vu**, grÃ¢ce Ã  notre **filtre Jinja personnalisÃ©**. Tu veux quâ€™on continue avec la suite ?